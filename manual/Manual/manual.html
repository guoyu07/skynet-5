<hrml>
  <head>
  
  <title>SKYNET v.1.0.0-alpha Manual</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="css/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
  </head>
  <body>
  <div id="wrapper">    
  <div id="main">
    <div id="columnMenu">
      <h2 class="logo"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAaCAYAAAD1wA/qAAAALHRFWHRDcmVhdGlvbiBUaW1lAMWaciAxOSBrd2kgMjAxNyAwMjo1Njo0NSArMDEwMBachLcAAAAHdElNRQfhBBMAORXFuVVnAAAACXBIWXMAAAsSAAALEgHS3X78AAAABGdBTUEAALGPC/xhBQAAAx9JREFUeNrtl19IU1Ecx+/+Ovtjioj5oEEPPS0J6inaW4EPBjXooVgPJfbQg+0hmBAoY7FUamwPU/eyDWszaq5oC5kVW8m0Qool+rIYDPawQpq49sf97XfmOTW16Zlt3oK+8OVc7j1/fp97zu/ccxnmv7aWUCgslCqViq/X6xvQtUgkYjus8sTj8QqlRCJhgsHg3Wg06pHL5XXFz/56kUA7OjqYUCikzWPFYrHp3t7e+n8Chs/nF0qpVMqEw2FDfoOSyeR7pVLZhOpwuVy2w90aQiaTMUtLS2P5EkqlUr7BwcFDqC6Hw2E77N9DdHd3cyORiDW/jTKZzH2dTsd22OtF1ntPT49wZWXFvh0E6C24OZfLMQaDge3w10MoFIpaSOZJCohZcAOYAXPBd8xm8zFWIUiy9vf31yUSCTcFhBdcjyGQzfh+aHx8XMwKBEnSgYGBRkjeWQqIafABDMABP9jwPGy324+zAqPVag9C0n6ggHgN3l+0nB6WqPcNYE7u6kyMjIy0ZbPZBQoItOT2YQge+PFWlWEDWB4dHZVUFYIk9tDQ0GEY8zMFxCvwXgwhAD+haIP03WQynakKBEnsvr6+I5DYAYpgXoD3YIga8DNKCKKk1Wo9W1EIspzUavXR1dXVEEUQLnAthhCBn5cJQZSamJg4X1EYjUZzIp1Of6UYfBIHz+AZce0QgijrdDovVgRieHj4FCR2hGJQ9OZrMATKjZd/CPFTU1NTVzeukLJkNBpPQz9RirEcYCGGQFutu1IQRB6P59qOYCwWSye0T1CM8TS/tishCPTRe1NpCKKZmZkbZcHYbLYL0C5N0be9CAKdobzVgiCam5tTkDg3/dMU0zkcjktQP0fRpw3MxxCN4HfVhiDy+Xy3NsEUU7lcriuUfT3Kr32pEUQTelG7BUG0uLh4u7W1tRC3QCD4NStut/s6ZR/orMTFEM3gj7sNQeT3+++1t7evAbS0tDBer/cmZVt0auVgiDbwJ7YgiAKBgK6rq0vImZ+fPycWi1XAhP5XMyXyHx20voA7wTF8Tw2+DF4uf2OvmFBeCOLx+NgP1c7Cc+35//8AAAAASUVORK5CYII=
"/> SKYNET</h2> 
      v.1.0.0-alpha Manual
      (c) 2017 Marcin Szczyglinski<br/>Check for newest versions here: <a href="https://github.com/szczyglinski/skynet" target="_blank" title="https://github.com/szczyglinski/skynet">https://github.com/szczyglinski/skynet</a>
      <br/>Project website: <a href="https://skynetframework.blogspot.com" target="_blank" title="https://skynetframework.blogspot.com">https://skynetframework.blogspot.com</a><br/>
      <ol class="topics"><li><a href="#1_What_is_Skynet?">What is Skynet?</a></li><li><a href="#2_Getting_started">Getting started</a></li><ol><li><a href="#2_1_Getting_Skynet_from_GitHUB">Getting Skynet from GitHUB</a></li><li><a href="#2_2_Requirements">Requirements</a></li><li><a href="#2_3_Skynet_files_structure">Skynet files structure</a></li><li><a href="#2_4_How_Skynet_works?">How Skynet works?</a></li><li><a href="#2_5_First_launch">First launch</a></li></ol><li><a href="#3_Request_and_Response">Request and Response</a></li><ol><li><a href="#3_1_Request">Request</a></li><li><a href="#3_2_Response">Response</a></li></ol><li><a href="#4_Features">Features</a></li><ol><li><a href="#4_1_Send/receive_parameters">Send/receive parameters</a></li><li><a href="#4_2_Send/receive_commands">Send/receive commands</a></li><li><a href="#4_3_Self-updating">Self-updating</a></li><li><a href="#4_4_Self-cloning">Self-cloning</a></li><li><a href="#4_5_Sending_emails">Sending emails</a></li><li><a href="#4_6_Logging_events">Logging events</a></li><li><a href="#4_7_Broadcasting">Broadcasting</a></li><li><a href="#4_8_Sleep_and_Wakeup">Sleep and Wakeup</a></li><li><a href="#4_9_File_transfer">File transfer</a></li><li><a href="#4_10_Remote_system_shell_execution">Remote system shell execution</a></li><li><a href="#4_11_Remote_PHP_code_execution">Remote PHP code execution</a></li><li><a href="#4_12_Registry">Registry</a></li><li><a href="#4_13_Echo/Ping">Echo/Ping</a></li><li><a href="#4_14_SkynetPeer">SkynetPeer</a></li></ol><li><a href="#5_Event_Listeners">Event Listeners</a></li><ol><li><a href="#5_1_Event:_onConnect">Event: onConnect</a></li><li><a href="#5_2_Event:_onRequest">Event: onRequest</a></li><li><a href="#5_3_Event:_onResponse">Event: onResponse</a></li><li><a href="#5_4_Event:_onEcho">Event: onEcho</a></li><li><a href="#5_5_Event:_onBroadcast">Event: onBroadcast</a></li><li><a href="#5_6_Event:_onConsole">Event: onConsole</a></li><li><a href="#5_7_Event:_onCli">Event: onCli</a></li><li><a href="#5_8_registerCommands">registerCommands</a></li></ol><li><a href="#6_How_to_create_own_Event_Listener?">How to create own Event Listener?</a></li><li><a href="#7_Console">Console</a></li><ol><li><a href="#7_1_Syntax">Syntax</a></li><li><a href="#7_2_Commands_list">Commands list</a></li></ol><li><a href="#8_Compiling_Skynet_sources_into_standalone">Compiling Skynet sources into standalone</a></li><li><a href="#9_Skynet_Control_Panel">Skynet Control Panel</a></li><ol><li><a href="#9_1_View:_Connections">View: Connections</a></li><li><a href="#9_2_View:_Database">View: Database</a></li></ol><li><a href="#10_Extending_&_customizing">Extending & customizing</a></li><ol><li><a href="#10_1_Custom_Data_Encryption">Custom Data Encryption</a></li><li><a href="#10_2_Custom_Connection_Classes">Custom Connection Classes</a></li><li><a href="#10_3_Custom_Commands_Shortcuts">Custom Commands Shortcuts</a></li><li><a href="#10_4_Custom_Themes">Custom Themes</a></li></ol><li><a href="#11_Configuration">Configuration</a></li><li><a href="#12_CLI_mode">CLI mode</a></li><li><a href="#13_API_Documentation">API Documentation</a></li><li><a href="#14_Updating_Skynet">Updating Skynet</a></li><li><a href="#15_Contact_and_donate">Contact and donate</a></li></ol>Donate Skynet with BTC: <b>14X6zSCbkU5wojcXZMgT9a4EnJNcieTrcr</b><br/>or via PayPal:<br><br><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="WNLXYMQRKU3Q6">
<input type="image" src="https://www.paypalobjects.com/en_US/PL/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>

<br>Version 1.0.0-alpha build 2017.04.19
    </div>
     
    <div id="columnMain"><a name="1_What_is_Skynet?"></a><h1>1. What is Skynet?</h1><b>Skynet Framework is powerful, easy to use GNU/GPL licensed remote control package and cluster-based network connections builder written in PHP. <br />With Skynet you can create different instances of Skynet (called &quot;clusters&quot;) and place them on different servers and then connects with them and sending data between them.</b><br /><br />Skynet clusters works on request-response architecture as peer-to-peer clusters. They can connects between itselfs, requesting data, responds for them and more. Skynet have self-replication and self-update mechanisms, so you can clone or update your clusters even by remote easy access. Event-listener architecture implemented in Skynet allows you to create your own Event Listeners with easy to use API and allow you to expand Skynet's capabilities according to your needs. Skynet can operate in two modes - as PHP script administrated by browser and in PHP CLI. Thanks to both of these features Skynet offers console interface for quick and easy commands sending and parameters to other clusters. Skynet clusters work on dynamically created databases based on information from other clusters, requests and responses. Framework also have powerful logging system works on .txt files and database. Skynet is ONLY ONE FILE compiled from source classes (compiler is included). This feature allows you to operate Skynet easily using a single file from any location.<br /><br /><img src="img/skynet.png"><br /><br /><b>NOTE: Skynet can be some of kind C&amp;C service and can offers powerful possibilites with this. Please do not use Skynet for illegal purposes.</b><br /><br /><h2> Most important features of Skynet: </h2><br /><br />- Peer to peer clusters architecture<br />- Requesting and responding data via internal connections based on easy to use parameters<br />- Self updating registry about other clusters<br />- Broadcast mode (clusters to clusters | many-to-many peer-to-peer connections)<br />- Event Listeners based, easy to extend architecture of API<br />- It is only one file whitch is compiling from sources (you can extends Skynet by your own methods and compile all into single file)<br />- Powerful event log system<br />- Build-in console <br />- Works in two modes: browser and CLI<br />- Easy to integration with tools like CRON<br />- Remote code execution<br />- Remote shell access<br />- Remote files transfers<br />- Administration panel via browser<br />- PDO multiple database engines support<br />- Self-update engine (even via remote)<br />- Self-clone engine (even via remote)<br />- Easy to extends and customization<br />- Factory based connections adapters (you can implements you own connection methods)<br />- Factory based data encryption (you can implements you own algorythms)<br />- Factory based event and logger listeners (you can create your own listeners and data loggers)<br />- Sending responses via email engine included<br />- Sleep and wakeup clusters commands included<br />- Full API documentation in PHPDOC<br />- It's all in one<br /><br /><b>Skynet Framework is under GNU/GPL license, so it's absolutely free to use but if you like it and think that Skynet is helpful to you - you can donate to the project with BTC.<br />Ok, so let's start with Skynet:</b><a name="2_Getting_started"></a><h1>2. Getting started</h1>Skynet Framework actual builds are hosted on GitHub. All you need to do is to download or clone repository and put it on your server.<br />It is preferred to start testing (if you using it at first time) on localhost server. After download and unpack archive or clone repository you will se some files and directories.<a name="2_1_Getting_Skynet_from_GitHUB"></a><h1>2.1. Getting Skynet from GitHUB</h1>Get Skynet from GitHub here: <a href="http://github.com/szczyglinski/skynet">http://github.com/szczyglinski/skynet</a><br />You can download or clone repository. Remember that Skynet is still in development, so check sometimes for newest versions.<br /><a name="2_2_Requirements"></a><h1>2.2. Requirements</h1>Skynet Framework requires these components to launch:<br /><br />- Webserver with PHP 5.5+ interpreter<br />- PDO extension (for databases connections) <br />- CURL extension (for CURL connections)<br /><br />Skynet works on PHP5 and PHP7.<a name="2_3_Skynet_files_structure"></a><h1>2.3. Skynet files structure</h1>After downloaded and unpacked (or cloned) repository you should see files structure of Skynet:<br /><br />- <b>_compiled/</b> - compiled standalone versions will be placed here by default<br />- <b>_download/</b> - folder for downloaded files<br />- <b>logs/</b> - log files<br />- <b>manual/</b> - manual and API documentation<br />- <b>src/</b> - Skynet core, source classes<br />- <b>dev.php</b> - Non-compiled Skynet cluster (works on classes from <i>src/</i> directory via autoloader)<br />- <b>skynet.php</b> - Compiled Skynet cluster (all classes are compiled into single standalone file)<br />- <b>compile.php</b> - Comilater script whitch compiling sources from <i>/src</i> folder into single standalone file<br />- <b>keygen.php</b> - Skynet Key ID generator<br />- <b>pwdgen.php</b> - Password hash to Skynet Panel generator<br />- <b>README.MD</b> - Readme file<br />- <b>CHANGELOG.txt</b> - Changelog<br />- <b>TODO.txt</b> - TO DO LIST in next versions<br />- <b>LICENSE.txt</b> - License<br /><br />As you see you have two versions of Skynet cluster by default: <br /><br />- <b>dev.php</b> - version with autoloader works on classes from <i>src/</i> directory. You can use this version for development and tests<br />- <b>skynet.php</b> - compiled version with all classes from <i>src/</i> directory included itself. This is the &quot;production version&quot; - one single file to put on server after compile from <i>src/</i><br /><br />You can work on this two versions (when you launch both you will see that these two works exacly the same at now), but the idea od Skynet clusters is to operate on standalone compiled versions called here &quot;clusters&quot;.<a name="2_4_How_Skynet_works?"></a><h1>2.4. How Skynet works?</h1>An &quot;idea&quot; od Skynet is peer-to-peer based network communication between standalone clusters. You can see one of that created clusters in downloaded repository - it's called <i>skynet.php</i>.<br />You can create many clusters like that and then connects them with theirselfs. At the beginning you can simple copy <i>skynet.php</i> to another file, e.g. <i>skynet2.php</i> - if you do this you will have two Skynet clusters. <br />At next,  you can create more, e.g. <i>skynet3.php</i>, <i>skynet4.php</i>, etc. Finally you can put them on different servers if you want. All of there standalone clusters will build your network.<br /><br />At first launch of every cluster, Skynet will build database (SQLite is default and is recomennded). Every cluster creates their own database file named <i>.CLUSTER_NAME.db</i> (if SQLite is used). Of course you can use antother database engine (e.g. MySQL) and then Skynet will work on database like that, but SQLite is preferred. This is the idea: one cluster + one database file. From now, Skynet will store data about another clusters in their own database. This clusters list will be at next sended to another registered clusters so clusters knowed by one cluster will be shared with another cluster and added to their database. Every cluster will know about other clusters, that's the idea of this network. <br /><br />When at least one another cluster is knowed by your cluster you are allowed to share data and commands between them. Sending data between clusters is based on request-response architecture: one cluster sends request to another, and the another creates response from request then returns it to requesting one. With more that one cluster those requests and responses can be sending over whole network. Skynet resends information about knowed (registered) clusters to anothers when connects to them, so if you have 3 clusters, e.g. <i>skynet1.php</i>, <i>skynet2.php</i>, <i>skynet3.php</i> you need to connect them each other at first. How to do this? When you connect first cluster with second cluster at first time the second cluster will get and store address of first cluster in their database and the first cluster will store address of second cluster. At now, if you connect second cluster with cluster number three, the cluster numer three will get (and store) address of second cluster... and the first cluster. It's not the end, becose after that, cluster number three will connect with first cluster and sends them their address. At now, every clusters will &quot;see&quot; each other. If you then add another - four cluster and connect to it from cluster one - all of clusters will receive information about new cluster (becose cluster one will inform them).<br /><br />When Skynet knows about another clusters then starts broadcasting to all of them and allows to sending them requests (addressed to specified clusters, or adressed to whole network) and receiving responses from them. Every cluster is a sender and responder at once, so communication is in two-sides. Every request can have prepared parameters and commands specified by cluster or by user (and other cluster can responds for them with defined action).<a name="2_5_First_launch"></a><h1>2.5. First launch</h1>If you have unpacked repository from GitHub put all of files from it on your localhost (or other) server, e.g. <i>localhost/skynet/</i> and then launch in your browser:<br /><br /><pre class="prettyprint linenums">http://localhost/skynet/dev.php</pre><br />(non-compiled developer version)<br /><br />or<br /><br /><pre class="prettyprint linenums">http://localhost/skynet/skynet.php</pre><br />(compiled version)<br /><br />At now you will see the same on both of them - Skynet Control Panel.<br />This panel shows you informations about Skynet status and connections to another clusters. This panel also allows you to easy browse stored in database connections logs.<br />As you see, Skynet is not connected to any cluster and shows you 2 warnings - about empty password and empty <i>SkynetKeyID</i>. By default, after you download Skynet these two fields are set to start values - you will need to configure them itself.<br />At first, let's try to generate <i>SkynetKey ID</i> - this is the unique identifier of your clusters network. All of your clusters must have SAME KEY ID to allow connections between them. For security reasons Skynet cluster is checking this key in every connection. If requested key not match to cluster key then response is not generated.<br /><br />To generate your Key, launch key generator included in package:<br /><br /><pre class="prettyprint linenums">http://localhost/skynet/keygen.php</pre><br />This keygen generates randomly key in every launch. When you generate you key, place them into your Skynet config file:<br /><br /><pre class="prettyprint linenums">/src/SkynetUser/SkynetConfig.php</pre><br />or/and in:<br /><br /><pre class="prettyprint linenums">/skynet.php</pre><br />if you launched compiled version (remember that after compiling all configuration data from <i>/src</i> are includes into standalone file)<br /><br />Put <i>KEY ID</i> into:<br /><br /><pre class="prettyprint linenums">const KEY_ID</pre><br />(default here is: 1234567890, replace it with your Key)<br /><br />Now, let's go to admin password hash generator. This password is using for accessing to your Skynet Control Panel. By default, this password is not set, so you must create one.<br />Skynet needs hash of the password, not the plain text of it. To generate password hash go to:<br /><br /><pre class="prettyprint linenums">http://localhost/skynet/pwdgen.php</pre><br />Put your password into input, click on &quot;Generate hash&quot; and place generated hash into config file or/and into compiled version.<br /><br /><pre class="prettyprint linenums">const PASSWORD</pre><br /><br />Ok, let's back to your Skynet Control Panel:<br /><br /><pre class="prettyprint linenums">http://localhost/skynet/dev.php</pre><br />or<br /><br /><pre class="prettyprint linenums">http://localhost/skynet/skynet.php</pre><br />You should now see request for password. Log in with it.<br />At now, you have simple preconfigured Skynet but no connections yet (becose you have only 2 clusters (dev.php and skynet.php) at now.<br />Let's try to connect them.<br /><br />In console at the bottom of window of Skynet Control Panel type:<br /><br /><pre class="prettyprint linenums">@connect CLUSTER_ADDRESS</pre><br />where <i>CLUSTER_ADDRESS</i> will be second cluster (<i>http://localhost/skynet/skynet.php</i> if you're in <i>/dev.php</i> and <i>http://localhost/skynet/dev.php</i> if you're in <i>/skynet.php</i>)<br />At next, click on &quot;Send request&quot; button.<br /><br />You should see information about connection with second cluster and the second cluster address should be stored into database.<br />Good. Now you have two working clusters. Let's try to create different clusters, e.g. by copying <i>skynet.php</i> into <i>skynet2.php</i>, etc. and try to connect with them.<br /><br /><b>REMEMBER:</b> All of your clusters MUST HAVE the same Skynet Key ID.<a name="3_Request_and_Response"></a><h1>3. Request and Response</h1>Skynet works on request-response based architecture. After sender sends request to responder, responder reads request and generates response for it. Every request is authorized by user-defined Skynet Key ID - unique for every clusters network. Inside code - request is a list of parameters and commands. Those parameters can be set by code (e.g. by Event Listener) or 'handly' via built-in console or command line in CLI mode. Second part is response - an object whitch is generated when request arrives. Response can be generated with built-in in Skynet or created by user Event Listeners. Communication request-response can be estabilished for cluster to cluster connection or via whole clusters network in broadcast mode. Every Skynet cluster is sender (server) and responder (client) at once.<br /><br />In code, those 2 objects are available as:<br /><br /><pre class="prettyprint linenums">use Skynet\Data\SkynetRequest;<br />$request = new SkynetRequest();</pre><br />and<br /><pre class="prettyprint linenums">use Skynet\Data\SkynetResponse;<br />$response = new SkynetResponse();</pre><br />In Event Listeners by easy to use:<br /><br /><pre class="prettyprint linenums">$this-&gt;request</pre><br />and<br /><pre class="prettyprint linenums">$this-&gt;response</pre><br />Every Event Listener has access to them and can manipulate sended/received via those objects data.<a name="3_1_Request"></a><h1>3.1. Request</h1>Request object creates, parses and manipulates on sending to another cluster data. This object offers easy access to all fields sending to another clusters. Every of those fields are params with pairs &quot;key:value&quot; whitch can be receive by another cluster and assigned to their request object. Skynet has some default built-in Event Listeners works on requesting and requested data and you can easily create your own listeners. By the way, this is an idea of Skynet - to create listeners and work with them under framework.<br /><br />Look at an example:<br />Code below creates new request object and sets field called 'foo' with value 'bar':<br /><pre class="prettyprint linenums">use Skynet\Data\SkynetRequest;<br />$request = new SkynetRequest();<br />$request-&gt;set('foo', 'bar');<br /></pre><br />Code below will receive value of field 'foo' from request object:<br /><pre class="prettyprint linenums">$foo = $request-&gt;get('foo');<br /></pre><br />This is the simpliest usage and it's operates on one single <i>key:value</i>request field.<br />With Skynet you can create more specified fields as arrays of params. Code below creates an array of two parameters in single request:<br /><br /><pre class="prettyprint linenums">use Skynet\Data\SkynetRequest;<br />$request = new SkynetRequest();<br />$request-&gt;set('foo', array('key1' =&gt; 'bar1', 'key2' =&gt; 'bar2'));<br /></pre><br />At next, you can receive array like that by:<br /><pre class="prettyprint linenums">$foo = $request-&gt;get('foo');<br />$key1 = $foo['key1'];<br />$key2 = $foo['key2'];<br /></pre><br />If a request field is not set then:<br /><br /><pre class="prettyprint linenums">$foo = $request-&gt;get('FIELD_KEY');<br /></pre><br />always returns NULL, so you can use this to check if any field exists in request, like below:<br /><br /><pre class="prettyprint linenums">if($request-&gt;get('FIELD_KEY') !== null)<br />{<br />  /* do something */<br />}<br /></pre><br />Code above sets single parameter (imagine that this is a single variable) whitch will be send to clusters, but you will also use Skynet to sending commands (they are documented in next sections).<br />Commands can take more that one parameter per command, e.g. if you using command @opt_set then you can specifiy more that one field to one command.<br />Take a look at example:<br /><br /><pre class="prettyprint linenums">use Skynet\Data\SkynetRequest;<br />$request = new SkynetRequest();<br />$request-&gt;set('@reg_set', array('key1' =&gt; 'bar1', 'key2' =&gt; 'bar2');<br /></pre><br />And now:<br /><br /><pre class="prettyprint linenums">key1:bar1 and key2:bar2</pre><br />are still a single parameter. So, with Skynet you can send more parameter where every parameter is an array, let's see an example:<br /><br /><pre class="prettyprint linenums">use Skynet\Data\SkynetRequest;<br />$request = new SkynetRequest();<br />$param1 = array('key1' =&gt; 'bar1', 'key2' =&gt; 'bar2');<br />$param2 = array('key3' =&gt; 'bar3', 'key4' =&gt; 'bar4');<br />$request-&gt;set('@reg_set', array($param1, $param2);<br /></pre><br />Every parametr can be set from 3 different ways:<br /><br />- in PHP code (as above)<br />- via webconsole<br />- via CLI mode<br /><br />Code above is equals to setting parameters from webconsole, e.g.:<br /><br /><pre class="prettyprint linenums">key1:value1, key2:value2</pre><br />and equals to the same in CLI mode:<br /><br /><pre class="prettyprint linenums">php skynet.php -send &quot;key1:value1, key2:value2&quot;</pre><br />The Request object works in 2 ways:<br /><br />- on &quot;sender&quot; side you are using request object to create request witch will be send to other clusters<br />- on &quot;receiver&quot; side cluster receives request from sender and operates on sended data by own request object just like above.<br /><br />So, if you sets a field called foo on sender cluster:<br /><br /><pre class="prettyprint linenums">use Skynet\Data\SkynetRequest;<br />$request = new SkynetRequest();<br />$request-&gt;set('foo', 'bar');<br /></pre><br />After send this request to receiver then receiver will be have access to field foo by own request object:<br /><br /><pre class="prettyprint linenums">use Skynet\Data\SkynetRequest;<br />$request = new SkynetRequest();<br />$foo = $request-&gt;get('foo');<br /></pre><br />You will see more about using Request in Event Listeners section.<br />At this time you should know that in Event Listeners you have simpliest access to request object by:<br /><br /><pre class="prettyprint linenums">$this-&gt;request</pre><br />When request is prepared (it can have lot of fields, above we are only sending one for an example) then you can send request to one specified cluster or whole clusters network.<a name="3_2_Response"></a><h1>3.2. Response</h1>Response objects creates and manipulates on response for received requests. After cluster receives request from another cluster response object creates and prepares response depends on received in request parameters or commands.<br />When preparing response for request Skynet launch Events Listeners whitch can add their own fields to response. Returned by response fields are received by request sender and available in its own response object.<br /><br />In code, the response object is creating this way:<br /><br /><pre class="prettyprint linenums">use Skynet\Data\SkynetResponse;<br />$response = new SkynetResponse();<br /></pre><br />Look at an example:<br />Code below creates new response object and fills field called 'foo' with value 'bar':<br /><pre class="prettyprint linenums">use Skynet\Data\SkynetResponse;<br />$response = new SkynetResponse();<br />$response-&gt;set('foo', 'bar');<br /></pre><br />Code below will receive value of field 'foo' from response:<br /><pre class="prettyprint linenums">$foo = $response-&gt;get('foo');<br /></pre><br />Let's see how it works:<br />Sender cluster sends a prepared request to another cluster sending field 'foo' to it:<br /><br />On request sender cluster side:<br /><pre class="prettyprint linenums">use Skynet\Data\SkynetRequest;<br />$request = new SkynetRequest();<br />$request-&gt;set('foo', 'bar');<br /></pre><br />Request above is sending to receiver cluster, at next the receiver cluster gets field 'foo' from own request object.<br /><br />On request receiver side:<br /><pre class="prettyprint linenums">use Skynet\Data\SkynetRequest;<br />$request = new SkynetRequest();<br />$foo = $request-&gt;get('foo');<br /></pre><br />And now, the receiver can prepare response for this request, e.g.:<br /><br />On request receiver (and response sender) side:<br /><pre class="prettyprint linenums">use Skynet\Data\SkynetRequest;<br />use Skynet\Data\SkynetResponse;<br /><br />$request = new SkynetRequest();<br />$response = new SkynetResponse();<br /><br />if($request-&gt;get('foo') == 'bar')<br />{<br />  $response-&gt;set('bar', 'foo');<br />}<br /></pre><br />At next, response is received by request sender and request sender have access to this response by own response object:<br /><br />On request sender (and response receiver) side:<br /><pre class="prettyprint linenums">use Skynet\Data\SkynetResponse;<br />$response = new SkynetResponse();<br /><br />if($response-&gt;get('bar') == 'foo')<br />{<br />  /* do something */<br />}<br /></pre><br />The Response object works in 2 ways:<br /><br />- on &quot;receiver&quot; side cluster generates response for request from sender cluster<br />- on &quot;sender&quot; side response is received and request sender can get data from this request received from response sender via own response object<br /><br />In Event Listeners you will be using response object via:<br /><br /><pre class="prettyprint linenums">$this-&gt;response</pre><br />Response is preparing once when request arrives and response for it is generated.<br />You can generate response only from code via Event Listeners.<a name="4_Features"></a><h1>4. Features</h1>Skynet has lot of features. In this section you will read about most important of them.<a name="4_1_Send/receive_parameters"></a><h1>4.1. Send/receive parameters</h1>Most basic (but most important) feature is remote sending and receiving parameters by request and response objects - everything in Skynet is controlled by this.<br />With Skynet you can setting single parameters like:<br /><br /><b>foo:bar</b><br /><br />or more complicated data, like arrays:<br /><br /><b>foo:bar1, bar2, bar3</b><br /><br />All parameters sending and receiving by Skynet are encrypted by default. You can disable data encryption in config file (not recommended) or implements you own algorythms for encryption (at default only simple base64 is included). All of parameters are sending by one single request (or response) - Skynet is packing them into one packet. How it works?<br /><br />You can set paameters by three different ways:<br /><br />- from PHP code via Event Listeners<br />- from webconsole<br />- from CLI<br /><br /><h2> Sending parameters from Event Listener: </h2><br />Let's imagine that we have 2 clusters: <i>skynet1.php</i> and <i>skynet2.php</i> and <i>skynet1.php</i> must send information about <i>foo</i> to <i>skynet2.php</i>.<br />To do this, <i>skynet1.php</i> must prepare request to be send, sets parameter (field) and assign to them value with time and sends prepared request to <i>skynet2.php</i><br />Skynet use special classes called Event Listeners for operating on requesting and receiving data, so all we need to do is to assign our parameter <i>foo</i> to event:<br /><br /><pre class="prettyprint linenums">onRequest()<br /></pre><br />This event is launches two times on both sides - when request is creating (on sender cluster) and when request is received (on receiver). As you see, every event is fired 2 times in 2 different context - as sender and as a receiver.<br /><br />This two contexts are named in Skynet as:<br /><br />- beforeSend<br />- afterReceive<br /><br />Information about actual context is getting as argument in every event.<br />Depends on this information you can prepare code for 'sender side' and for 'receiver side'.<br /><br />To prepare request (on sender cluster) with our parameter <i>foo</i> we must use context &quot;beforeSend&quot;, becose this context is used when request is under preparation.<br /><br />skynet1.php:<br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('foo', 'bar');<br />  }<br />}<br /></pre><br />That's it. We creates new parameter (field) called <i>foo</i> and set this to <i>bar</i>.<br />Request will be send when Skynet will be broadcasting another clusters (or via single connection if you specify it). Sended parameter will be available on receiver cluster request object from context <i>afterReceive</i>:<br /><br />skynet2.php:<br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;afterReceive&quot;)<br />  {<br />    $foo = $this-&gt;request-&gt;get('foo');<br />  } <br />}<br /></pre><br />And now the receiver cluster can prepare response for request above. We will use for that <i>onResponse()</i> event witch works in two context too:<br /><br />skynet2.php:<br /><pre class="prettyprint linenums">public function onResponse($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $foo = $this-&gt;request-&gt;get('foo');<br />    if($foo !== null)<br />    {<br />      $this-&gt;response-&gt;set('thanks', 'Thank you!');<br />    }<br />  } <br />}<br /></pre><br />That' it. Request receiver (skynet2.php) will now respond with parameter (field) <i>thanks</i> setted to <i>Thank you!</i>.<br />Now, when a request sender cluster (skynet1.php) receives the response, parameter <i>thanks</i> will be available in its response object in context <i>afterReceive</i>:<br /><br />skynet1.php:<br /><pre class="prettyprint linenums">public function onResponse($context)<br />{<br />  if($context == &quot;afterReceive&quot;)<br />  {<br />    $responseThanks = $this-&gt;response-&gt;get('thanks');<br />    if($responseThanks !== null)<br />    {<br />      /* Nice. */<br />    }<br />  } <br />}<br /></pre><br />If you want to specify only one cluster receiver when preparing request you should use command:<br /><br /><pre class="prettyprint linenums">@to</pre><br />Example for specify skynet2.php cluster as only receiver of our request:<br />skynet1.php:<br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('foo', 'bar');<br />    $this-&gt;request-&gt;set('@to', 'http://localhost/skynet/skynet2.php');<br />  }<br />}<br /></pre><br />The <b>@to</b> command specifying receiver cluster. Only this cluster will receive prepared request as above.<br /><br />Another way is to send parameters via webconsole and CLI mode - those two methods are described more complexed in section &quot;Console &amp; CLI Mode&quot;.<br /><br /><h2> Sending parameters from webconsole: </h2><br />If you want send parameter via webconsole type:<br /><br /><pre class="prettyprint linenums">param:value</pre><br />and click on &quot;Send request&quot;.<br />In our case this could be, e.g.:<br /><br /><pre class="prettyprint linenums">foo:bar</pre><br />To send more than one parameter via webconsole, you must set every parameter in new line and separate them by &quot;;&quot;, e.g.:<br /><br /><pre class="prettyprint linenums">foo:bar; <br />foo2:bar2; <br />foo3:bar3</pre><br />Then when you click on &quot;Send request&quot; three parameters (fields) will be send in single request.<br /><br /><h2> Sending parameters from CLI mode: </h2><br />In PHP CLI mode, when you launch Skynet this way you will need to use:<br /><br /><pre class="prettyprint linenums">php skynet.php -send &quot;foo:bar; foo2:bar2&quot;</pre><a name="4_2_Send/receive_commands"></a><h1>4.2. Send/receive commands</h1>Skynet commands are special types od parameters. They are requests for some kind of action to be executed. Commands are similar to parameters but prefixed by &quot;@&quot;. Every parameter with name prefixed that is interpreted by Skynet as a command.<br />Commands can take parameter (or parameters) and can be call from PHP code (via Event Listeners) or via webconsole or command line in CLI mode.<br /><br />Let's look at the example.<br />In previous section we was sending parameter <i>foo</i> to <i>skynet2.php</i> cluster. We defined receiver cluster by:<br /><br /><pre class="prettyprint linenums">@to</pre><br />This parameter is one of the commands in Skynet.<br />With command you can send to another clusters a request to execute specified by command action, like set value in database, or launch any other action. You can define actions for received commands in Event Listeners:<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;afterReceive&quot;)<br />  {<br />    if($this-&gt;request-&gt;get('@COMMAND_NAME')<br />    {<br />      /* do something */<br />    }<br />  } <br />}<br /></pre><br />where @COMMAND_NAME is name of command sended by:<br /><br /><pre class="prettyprint linenums">$this-&gt;request('set', '@COMMAND_NAME');</pre><br />or<br /><br /><pre class="prettyprint linenums">@COMMAND_NAME</pre><br />in webconsole.<br /><br /><br />Special type of commands is:<br /><br /><b>return</b><br /><br />It's not called &quot;return&quot;, but its called by single &quot;@&quot; char.<br />When parameter returned with response is prefixed by &quot;@&quot; and not &quot;@&lt;&lt;&quot; that is exacly the echo command. This command do nothing but returns parameters sended in request. You can disable this option (include sended data in response) in config file.<br /><br />Another special type od command is &quot;Skynet control parameter&quot;.<br />Those commands are prefixed by <b>&quot;_skynet&quot;</b> (not by &quot;@&quot;) and controls connection params.<br />You should not use prefix <i>_skynet</i> in your own defined parameters and commands becose this prefixes are reserved for Skynet internal core.<br /><br />Commands can take arguments, e.g. when you're setting receiver cluster address by:<br /><br /><pre class="prettyprint linenums">$this-&gt;request-&gt;set('@to', 'CLUSTER_ADDRESS');</pre><br /><i>CLUSTER_ADDRESS</i> is here an argument of command <b>@to</b>.<br /><br />If you want to specify argument by webconsole, you must add it after space, e.g.:<br /><br /><pre class="prettyprint linenums">@to CLUSTER_ADDRESS</pre><br />(press &quot;Send request&quot;)<br /><br />You can pass multiple arguments to some commands by separating them with coma -&quot;<b>,</b>&quot;  e.g.:<br /><br /><pre class="prettyprint linenums">@connect CLUSTER1, CLUSTER2, CLUSTER3<br /></pre><br />Usage in CLI is similar to defining parameters:<br /><br /><pre class="prettyprint linenums">-send &quot;@connect CLUSTER1, CLUSTER2, CLUSTER3&quot;<br /></pre><br />You will find full commands list in section &quot;Skynet Commands&quot;. Of course you can (and you should) define your own commands in your own Event Listeners to extends Skynet for functionality as you need.<a name="4_3_Self-updating"></a><h1>4.3. Self-updating</h1><b>Event Listener:</b> Skynet\EventListener\SkynetEventListenerUpdater<br /><br />Skynet has built-in function for remotely self-updating its own PHP source code. When you send to clusters the <b>@self_update</b> command, all clusters whitch receive this command will launch update procedure. When you are sending <b>@self_update</b> command you must specify location of skynet cluster with new code. When updating, cluster will connect with it. At next, cluster with new source code will show their code and destination clusters will read this code and replace own code with it. How it works?<br /><br />Let's imagine that we have two Skynet clusters in two different locations: <i>skynet_old.php</i> and <i>skynet_new.php</i>.<br /><br />E.g.:<br /><br /><pre class="prettyprint linenums">http://localhost/foo/skynet_old.php</pre><br />and <br /><br /><pre class="prettyprint linenums">http://localhost/bar/skynet_new.php</pre><br /><br />When <i>skynet_old.php</i> is your old file with some code and <i>skynet_new.php</i> is the newest compiled version (e.g. with new functions whitch you build-in) you can send request to all old clusters from this new one (or from another cluster). Example: if you'll send <b>@self_update</b> command from <i>skynet_new.php</i> to remotely placed <i>skynet_old.php</i> and specify <i>skynet_new.php</i> as source for updating procedure then <i>skynet_old.php</i> will connect with <i>skynet_new.php</i> and ask it for show its own code. At next, <i>skynet_new.php</i> will show it own source code and old cluster will get this. Finally, <i>skynet_old.php</i> will replace own code with this new one. Of course, you can send <b>@self_update</b> command to more than one cluster at once. If you do this then all older clusters will update with new one. You can do this, even if other clusters are on different servers with this one command: <b>@self_update</b>.<br /><br />When sending <b>@self_update</b> command you need specify address to cluster witch is source with new PHP code. After updating, clusters whitch was updated will response with update result: <br />You will see parameters in response:<br /><br /><pre class="prettyprint linenums">@&lt;&lt;self_update_success</pre><br />or if any errors occurs:<br /><br /><pre class="prettyprint linenums">@&lt;&lt;self_update_error</pre><br />with update procedure results.<br /><br /><h2> Parameters: </h2><br /><b>source</b> - source address to cluster with new code<br /><br /><h2> Usage: (PHP code) </h2><br /><br />You can send <b>@self_update</b> command from event listener:<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('@self_update', array('source' =&gt; 'ADDRESS_TO_SOURCE_CLUSTER'));<br />  }<br />}<br /></pre><br />When <i>ADDRESS_TO_SOURCE_CLUSTER</i> is address to cluster with new code, in our case this is:<br /><br /><pre class="prettyprint linenums">http://localhost/bar/skynet_new.php</pre><br />So, command above will update all clusters with code of this one.<br />By default, command sended like that will be send to all clusters, e.g.:<br /><br /><pre class="prettyprint linenums">http://localhost/foo/skynet_old.php</pre><br /><pre class="prettyprint linenums">http://localhost/foo2/skynet_old.php</pre><br /><pre class="prettyprint linenums">http://localhost/foo3/skynet_old.php</pre><br /><pre class="prettyprint linenums">http://localhost/foo4/skynet_old.php</pre><br />If you need to update only one specified cluster you must use <b>@to</b> command, e.g.:<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('@self_update', array('source' =&gt; 'ADDRESS_TO_SOURCE_CLUSTER'));<br />    $this-&gt;request-&gt;set('@to', 'ADDRESS_TO_OLD_CLUSTER');<br />  }<br />}<br /></pre><br />When <i>ADDRESS_TO_OLD_CLUSTER</i> is an address to cluster you want to update.<br /><br /><h2> Usage: (webconsole) </h2><br /><br /><pre class="prettyprint linenums">@self_update source:ADDRESS_TO_SOURCE_CLUSTER<br /></pre><br />Command specified like that will send request to all clusters.<br />To specify one cluster as a receiver you add <b>@to</b> command:<br /><br /><pre class="prettyprint linenums">@self_update source:ADDRESS_TO_SOURCE_CLUSTER;<br />@to ADDRESS_TO_OLD_CLUSTER;<br /></pre><br /><h2> Usage: (CLI mode) </h2><br /><br /><pre class="prettyprint linenums">php skynet_new.php -send &quot;@self_update source:ADDRESS_TO_SOURCE_CLUSTER&quot;</pre><br />or<br /><br /><pre class="prettyprint linenums">php skynet_new.php -send &quot;@self_update source:ADDRESS_TO_SOURCE_CLUSTER; @to ADDRESS_TO_OLD_CLUSTER&quot;</pre><br /><br />All updates results are put logs into database and text logs (if enabled).<br />You can see this logs in <b>DATABASE VIEW</b> and in your logs folder.<br />After update procedure all clusters will have THE SAME source code as source.<br /><br />Self-update procedure is executes on destination clusters in <b>onResponse (beforeSend)</b> event.<br /><br /><b>BE CAREFUL WHEN UPDATING:</b> If you accidentally send wrong source or source with errors it is possible to loose connection with clusters. Update only with fully stable and tested compilations.<a name="4_4_Self-cloning"></a><h1>4.4. Self-cloning</h1><b>Event Listener:</b> Skynet\EventListener\SkynetEventListenerCloner<br />Self-cloning is functionality whitch allow Skynet to clone itself to another locations. By default this option is disabled in config - if you want to use this you must enable it in your config file. <br /><br />Configuation file is placed in:<br /><pre class="prettyprint linenums">/src/SkynetUser/SkynetConfig.php</pre><br />If you want to enable <i>clone</i> function just set to TRUE option below:<br /><br />'core_cloner' =&gt; false,<br /><br /><br />When @clone command is sent to clusters then every cluster will try to scan all subdirectories where cluster is placed and try to copy to them. After that (if successed) - clusters will broadcast information about new clones on the network to register new ones by other clusters.<br /><br />At first, you should test this option by localhost.<br />Just create directory (and subdirectories in it) when cluster is placed. After that, launch your cluster with command:<br /><br /><pre class="prettyprint linenums">@clone me</pre><br />Just type command above in webconsole and 'Send Request'.<br />Your cluster should be cloned into all directories in its location, and at next - a new clones should be cloned itselfs into next subdirectiories, and so one...<br /><br />To remotely send @clone command to other clusters, type in webconsole:<br /><br /><pre class="prettyprint linenums">@clone CLUSTER_ADDRESS<br /></pre><br />or<br /><br /><pre class="prettyprint linenums">@clone CLUSTER_ADDRESS1, CLUSTER_ADDRESS2, CLUSTER_ADDRESS3...<br /></pre><br />or with argument &quot;all&quot; (or without any arguments) to send command to all clusters.<br />In Skynet every command typed without parameters is sending to all clusters by default.<br /><br />Analogously, you can send command in Event Listener:<br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('@clone', 'all');   <br />  }<br />}<br /></pre><br /><b>Be careful with using this option, becase if you call @clone then Skynet will replicate to ALL directories where it placed.</b><a name="4_5_Sending_emails"></a><h1>4.5. Sending emails</h1><b>Event Listener:</b> Skynet\EventListener\SkynetEventListenerEmailer<br />Skynet has built-it method for sending responses from clusters to specified email address by using PHP's sendmail. When sending emails option is enabled then email is sending every time when response is created on server that create response (or if response is generated from code and e.g. launching from CRON). By default, there is no specified email address of receiver in config file (default address is set) - you must specify email address itself in:<br /><br /><pre class="prettyprint linenums">/src/SkynetUser/SkynetConfig.php</pre><br />by placing new email address against:<br /><br /><pre class="prettyprint linenums">'emailer_email_address' =&gt; 'your@email.com',</pre><br />After that, if an email address is specified you must enable sending emails on cluster. You can do this by setting Skynet registry option <i>email</i> to value <i>1</i>.<br /><br />To enable sendmail option on cluster, type in webconsole:<br /><br /><pre class="prettyprint linenums">@opt_set email:1<br /></pre><br />This will enable email sending for all clusters in network.<br />If you want to enable option only on specified cluster you must mixed this option with command @to, like that:<br /><br /><pre class="prettyprint linenums">@opt_set email:1;<br />@to CLUSTER_ADDRESS<br /></pre><br />(remember about separate commands with coma &quot;;&quot; and press &quot;Send request&quot;)<br /><br />To disable email sending set option to <i>0</i>.<br /><br />Sended emails are also logged in database and text logs (if enabled).<a name="4_6_Logging_events"></a><h1>4.6. Logging events</h1><b>Loggers are offered from:</b> Skynet\EventLogger<br />Skynet has complex logging system. It stores events logs (includes requests, responses and more) in two different places - as text files on server and in database. <br />By default, both of these options are enabled but you can disable/or enable them into your config file.<br /><br />Text files logs are stored in specified in config file location (default is: <i>/logs</i>).<br />In database, you will see all of your stored data by switching your <b>View Mode</b> in <i>Skynet Control Panel</i> to <i>Database View</i>.<br /><br />Records with logs can be removed by clicking on <i>Delete</i> button or you can erasing all records by one click via <i>Delete all</i> button. <br /><br />You can easy generate txt files from specified records by clicking on <i>Generate TXT</i> button on record.<br /><br />Loggers are based on factory design so you can create your own logging system and register this into Skynet.<br />Every event log can by configured in config file. You can create your own logging system also and append it to the factory.<br /><br /><b>NOTE: Remember that every event is logged so your logs directory may includes lot of files after longer time. You should delete old, unused logs every once in a while.</b><a name="4_7_Broadcasting"></a><h1>4.7. Broadcasting</h1>Skynet can work in two different modes: as single connection cluster-cluster or in broadcast mode (peer-to-peer). When Skynet is in brodacast mode all of clusters are broadcasted every time when Skynet is launches. <br /><br />By default, every cluster starts by code below:<br /><br /><pre class="prettyprint linenums">$skynet = new Skynet(true);<br />$service = new SkynetResponder(true);<br /></pre><br />in<br /><br /><pre class="prettyprint linenums">SkynetLauncher()</pre><br />Parameter TRUE in <i>Skynet()</i> constructor starts broadcast mode and renders output (setting this to FALSE will not starts broadcast automaticaly). If you set this to FALSE then you can launch broadcast mode manualy by:<br /><br /><pre class="prettyprint linenums">$skynet-&gt;broadcast();</pre><br />And to enable output:<br /><br /><pre class="prettyprint linenums">echo $skynet-&gt;renderOutput();</pre><br />or simply:<br /><br /><pre class="prettyprint linenums">echo $skynet;</pre><br /><br />Parameter TRUE in <i>SkynetResponder()</i> constructor launch responder (setting this to FALSE will disable responding by Skynet).<br /><br /><br /><h2> Extended broadcast (resending requests) </h2><br /><b>Event Listener:</b> Skynet\EventListener\SkynetEventListenerEcho<br />When Skynet is in broadcast mode then every cluster is requested at start. But notice that when sending requests that requests are sending only to clusters (stored in database) once and the response is returned once only to sender also. <br />What now if you want to resend responses and requests to another clusters? You will need to use <b>@broadcast</b> command.<br /><br />This command tells Skynet to resend requests and responses to next clusters.<br /><br /><b>Example:</b><br /><br />In normal broadcast the first cluster sends to other clusters request with parameter:<br /><br /><pre class="prettyprint linenums">foo:bar</pre><br />Every cluster responds for this by returning response to first cluster (witch was send request). <br />And that's finish. Nothing more will happend.<br /><br />In extended broadcast mode (when <b>@broadcast</b> command is used) request will be resend to the next clusters by other clusters. <br />In this case, when you send request with <i>foo:bar</i> to cluster number 2, then cluster number 2 will connect with cluster 3, 4, 5... and send them exacly the same request (with <i>foo:bar</i>).<br /><br />To enable extended broadcast mode, type in webconsole:<br /><br /><pre class="prettyprint linenums">@broadcast</pre><br />or in Event Listener:<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('@broadcast', '1');<br />  }<br />}<br /></pre><br /><b>Note:</b> with extended broadcast you can create more complexed, chained actions, like resending requests decorated by data received from other cluster on the way.<br /><br /><b>Note:</b> when cluster receives <b>@broadcast</b> command no response is generated (it should be sended in <i>onBroadcast()</i>, not in <i>onResponse()</i> event if needed).<a name="4_8_Sleep_and_Wakeup"></a><h1>4.8. Sleep and Wakeup</h1><b>Event Listener:</b> Skynet\EventListener\SkynetEventListenerSleeper<br />Every cluster can be remotely &quot;sleeped&quot;. Sleeped clusters are not broadcasting and they not generate responses.<br /><br />If you want to sleep specified cluster, type in webconsole:<br /><br /><pre class="prettyprint linenums">@sleep CLUSTER_ADDRESS</pre><br />or<br /><br /><pre class="prettyprint linenums">@sleep CLUSTER_ADDRESS1, CLUSTER_ADDRESS2, CLUSTER_ADDRESS3...</pre><br />If you want to sleep your own cluster, type:<br /><br /><pre class="prettyprint linenums">@sleep me</pre><br />In Event Listener you will do it with:<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('@sleep', '1');<br />  }<br />}<br /></pre><br />Alternatively, you can sleep cluster via setting option:<br /><br /><pre class="prettyprint linenums">@opt_set sleep:1</pre><br />In Event Listener (it will work only for THIS cluster):<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;opt_set('sleep', 1);<br />  }<br />}<br /></pre><br />When sleep, you can restore cluster by wake up it.<br />To wakeup cluster just use:<br /><br /><pre class="prettyprint linenums">@wakeup CLUSTER_ADDRESS</pre><br />or<br /><br /><pre class="prettyprint linenums">@wakeup CLUSTER_ADDRESS1, CLUSTER_ADDRESS2, CLUSTER_ADDRESS3...</pre><br />to wakeup remote cluster.<br /><br />OR:<br /><br /><pre class="prettyprint linenums">@wakeup me</pre><br />if you want to wake up your own cluster.<br /><br />Alternatively, you can wakeup cluster by setting option <i>sleep</i> to <i>0</i>:<br /><br /><pre class="prettyprint linenums">@opt_set sleep:0</pre><a name="4_9_File_transfer"></a><h1>4.9. File transfer</h1><b>Event Listener:</b> Skynet\EventListener\SkynetEventListenerFiles<br /><br />Skynet can gets and writes remote files via one command. You can open any file (if you have correct privilleges) on remote server where Skynet cluster is placed, read its data and get this data in response. You can also put remote file by sending request and defining data to save.<br /><br />To read remote file from server where Skynet cluster is placed use command:<br /><br /><pre class="prettyprint linenums">@fget</pre><br />This command takes one parameter:<br /><br /><pre class="prettyprint linenums">path:PATH_TO_FILE</pre><br /><br />By example, after Skynet cluster receives request:<br /><br /><pre class="prettyprint linenums">@fget path:file.txt</pre><br />(via PHP code):<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('@fget', array('path' =&gt; 'file.txt'));<br />  }<br />}<br /></pre><br />then cluster will try to open file called <i>file.txt</i> and read its content.<br />If success then content of this file will be returned in response in parameter:<br /><br /><pre class="prettyprint linenums">@&lt;&lt;fgetFile</pre> <br /><br />This parameter will be have content of readed file.<br />This content will be also saved in <i>/_download</i> folder where Skynet whitch sent request for is placed.<br /><br />If any errors occurs (file not exists or no access) then information about it will be returned in paramterer:<br /><br /><pre class="prettyprint linenums">@&lt;&lt;fgetStatus</pre><br />To put a file on remote server where Skynet cluster is placed use command:<br /><br /><pre class="prettyprint linenums">@fput</pre><br />This command takes two parameters:<br /><br /><pre class="prettyprint linenums">path:PATH_TO_FILE, data:DATA_TO_SAVE</pre><br />By example, if you want put file <i>file.txt</i> with data <i>some_text</i> just use a command:<br /><br /><pre class="prettyprint linenums">@fput path:file.txt,data:some_text</pre><br />or via PHP code:<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('@fput', array('path' =&gt; 'file.txt', 'data' =&gt; 'some_text'));<br />  }<br />}<br /></pre><br />Result of file saving will be returned in response in field:<br /><br /><pre class="prettyprint linenums">@&lt;&lt;fputStatus</pre><br />To delete remote file use command:<br /><br /><pre class="prettyprint linenums">@fdel path:PATH_TO_FILE</pre><a name="4_10_Remote_system_shell_execution"></a><h1>4.10. Remote system shell execution</h1><b>Event Listener:</b> Skynet\EventListener\SkynetEventListenerExec<br />Skynet allows you to remote shell execution. You can launch shell command (or other application) on remote and Skynet will returns output of it. Note that this option should not be used for nonauthorized operations. Skynet offers 3 different ways to remote shell execution. All of them are based on PHP shell function but they are small different. By sending one parameter you can remotely opens shell execute command and Skynet will return output of the shell execution in response object.<br /><br />First command for remote shell execution is:<br /><br /><pre class="prettyprint linenums">@exec</pre><br />This is based on PHP <i>exec()</i> function, it takes one argument whitch is command to be executed on remote shell.<br />Argument with command to execute must be set in cmd parameter.<br /><br />Example of usage (PHP code):<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('@exec', array('cmd' =&gt; 'COMMAND_TO_EXECUTE'));<br />  }<br />}<br /></pre><br />Example of usage (webconsole):<br /><br /><pre class="prettyprint linenums">@exec cmd:COMMAND_TO_EXECUTE</pre><br />Skynet will remotely open system shell (via <i>exec()</i> function), execute <i>COMMAND_TO_EXECUTE</i> and return output via 3 parameters in response:<br /><br /><pre class="prettyprint linenums">@&lt;&lt;execResult ($result)</pre><br /><pre class="prettyprint linenums">@&lt;&lt;execReturn ($return)</pre><br /><pre class="prettyprint linenums">@&lt;&lt;execOutput ($output)</pre><br />Whitch are output of:<br /><br /><pre class="prettyprint linenums">$result = exec($cmd, $output, $return);</pre><br /><br /><h2> Example: </h2><br />If you want execute command <i>whoami</i> on remote linux or Windows system, just use:<br /><br /><pre class="prettyprint linenums">@exec cmd:whoami</pre><br />or in PHP code:<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('@exec', array('cmd' =&gt; 'whoami'));<br />  }<br />}<br /></pre><br />Output of remote execution of command <i>whoami</i> (user name) will be return in response.<br /><br />Another command is:<br /><br /><pre class="prettyprint linenums">@system</pre><br />This is based on PHP <i>system()</i> function, it takes one argument whitch is command to be executed on remote shell.<br />Like above, argument with command to execute must be set in <i>cmd</i> parameter.<br /><br />This command executes remotely:<br /><br /><pre class="prettyprint linenums">$result = system($cmd, $return);</pre><br />And returns in response:<br /><br /><pre class="prettyprint linenums">@&lt;&lt;execResult ($result)</pre><br /><pre class="prettyprint linenums">@&lt;&lt;execReturn ($return)</pre><br />Like above if you want to execute <i>whoami</i> just use:<br /><br /><pre class="prettyprint linenums">@systen cmd:whoami</pre><br />or in PHP code:<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('@system', array('cmd' =&gt; 'whoami'));<br />  }<br />}<br /></pre><br />Last command is a little bit complicated and it's based on PHP's:<br /><br /><pre class="prettyprint linenums">proc_open()</pre><br />In Skynet, when you use command:<br /><br /><pre class="prettyprint linenums">@proc</pre><br />It will remotely execute <i>proc_open()</i> function with passed process name as first argument.<br /><br />Usage of <b>@proc</b> is different than two previous commands.<br />Process you want to open needs to be passed by <i>proc</i> argument:<br /><br /><pre class="prettyprint linenums">@proc proc:PROCESS_NAME</pre><br />or in PHP code:<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;request-&gt;set('@proc', array('proc' =&gt; 'PROCESS_NAME'));<br />  }<br />}<br /></pre><br />Skynet will return output like before but here you can manipulate process <i>pipes</i><br /><br />At this time you must do this manualy, by editing listener or creating your own.<br />By default, <i>proc_open()</i> runs under configuration as below:<br /><br /><pre class="prettyprint linenums">$descriptorspec = array(<br />    0 =&gt; array('pipe', 'r'), <br />    1 =&gt; array('pipe', 'w'), <br />    2 =&gt; array('pipe', 'w') <br />);<br /><br />$process = proc_open($proc, $descriptorspec, $pipes);<br /><br />if(is_resource($process)) <br />{   <br />  $result = stream_get_contents($pipes[1]);<br />  fclose($pipes[0]);<br />  fclose($pipes[1]);   <br />  fclose($pipes[2]);<br />  $return = proc_close($process);<br />}<br /></pre><br />where <i>$proc</i> is process name passed remotely from request and <i>$return</i> is always returned in response via <b>@&lt;&lt;procReturn</b> parameter.<a name="4_11_Remote_PHP_code_execution"></a><h1>4.11. Remote PHP code execution</h1><b>Event Listener:</b> Skynet\EventListener\SkynetEventListenerEval<br /><br />Skynet offers remote PHP code execution functionality. It's based on PHP's <i>eval()</i> function.<br />If you need to execute PHP code sended via request on remote cluster(s) just use:<br /><br /><pre class="prettyprint linenums">@eval</pre><br />Command takes one parameter: <i>php</i> with code source.<br /><br />Example:<br /><br />If you want to execute code below on another cluster and takes result:<br /><br /><pre class="prettyprint linenums">&lt;?php return 2+2; ?&gt;</pre><br />you need to do this like these:<br /><br /><pre class="prettyprint linenums">@eval php:2+2;</pre><br />or in Event Listener:<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $code = '2 + 2;';<br />    $this-&gt;request-&gt;set('@eval', array('php' =&gt; $code));<br />  }<br />}<br /></pre><br />Skynet will send request, remotely execute PHP code and returns output in response field:<br /><br /><pre class="prettyprint linenums">@&lt;&lt;eval</pre><a name="4_12_Registry"></a><h1>4.12. Registry</h1>Skynet offers database registry to quick and easy store any data. Data in registry is stored by key-value pairs structure and every Event Listener has access to this registry. <br />You can use registry to store any data, after that you can send this data via request or use it stored data in response.<br /><br />To store any value in registry use command:<br /><br /><pre class="prettyprint linenums">@reg_set foo:bar</pre><br />where <i>foo</i> is the key, and <i>bar</i> is the value<br /><br />To receive stored registry value from remote cluster, use:<br /><br /><pre class="prettyprint linenums">@reg_get foo</pre><br />After request will be sent, value of the key <i>foo</i> will be returned in response.<br /><br />You can store multiple values at once, by separating them by coma &quot;,&quot;. <br /><br /><h2> Examples: </h2><br /><br /><pre class="prettyprint linenums">@reg_set foo:bar, foo2:bar2, foo3:bar3</pre><br /><pre class="prettyprint linenums">@reg_get foo, foo2</pre><br />To store value in cluster's own registry, use this code in event listener:<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;reg_set('foo', 'bar');<br />  }<br />}<br /></pre><br />To get value from registry use:<br /><br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $foo = $this-&gt;reg_get('foo');<br />  }<br />}<br /></pre><br />Of course, you can use all of this in every event, not only in onRequest().<br /><br />If you want to set/ or get values from specified clusters you must mix request with @to command:<br /><br /><pre class="prettyprint linenums">@reg_set foo:bar;<br />@to CLUSTER_ADDRESS<br /></pre><a name="4_13_Echo/Ping"></a><h1>4.13. Echo/Ping</h1><b>Event Listener:</b> Skynet\EventListener\SkynetEventListenerEcho<br />Echo command sends to all clusters a request for another echo (ping). When clusters receives <b>@echo</b> command then they will send ping to another clusters stored in database. You can use this command to update clusters lists (when sending echo, clusters list from database is included in request as a clusters chain).<br /><br />To send <b>@echo</b> command just type:<br /><br /><pre class="prettyprint linenums">@echo</pre><br />This will send command to all clusters in network.<br /><br />Echo command (and <b>@broadcast</b> command) are use special object called <b>SkynetPeer</b>. This object allows to create other connection when cluster is already connected with other (different) cluster. <br />In simply words - this is &quot;connection in connection&quot;. You can read about <b>SkynetPeer</b> in next section.<br /><br /><b>Note:</b> when <b>@echo</b> was sent then no response is generated (response connection is generating by <i>Peer</i>).<br /><br />To execute code in Event Listener when <b>@echo</b> is received you should use <i>onEcho()</i> event instead of <i>onResponse()</i>.<a name="4_14_SkynetPeer"></a><h1>4.14. SkynetPeer</h1>SkynetPeer is a special object that can opens another connection when Skynet requesting or responding to another cluster. You can use <b>SkynetPeer</b> to connect with any other cluster in every event in any situation.<br /><br />By example, let's imagine that cluster number 2 already responding to cluster number 1, and <i>onResponse()</i> event is fired in cluster 2:<br /><br /><pre class="prettyprint linenums">public function onResponse($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    /* response to cluster 1 is creating here */<br />  } <br />}<br /></pre><br />As you see, at this moment response for request from cluster 1 is generating.<br />But what if you want to connect here with another cluster and send request to it? You should use <b>SkynetPeer</b>.<br /><br /><h2> Example: </h2><br /><br />cluster number 2:<br /><pre class="prettyprint linenums">use Skynet\Core\SkynetPeer;<br />use Skynet\Data\SkynetRequest;<br />public function onResponse($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    /* response to cluster one is creating here */<br />    $skynetPeer = new SkynetPeer();<br />    $newRequest = new SkynetRequest();<br />    $newRequest-&gt;set('foo', 'bar');<br />    $skynetPeer-&gt;assignRequest($newRequest);<br />    $skynetPeer-&gt;connect('CLUSTER_THREE_ADDRESS');<br />  } <br />}<br /></pre><br />In code above we are creating response to cluster number 1.<br />In that response <b>SkynetPeer</b> was created, new request was created and the request was sent to cluster number 3.<br /><br />With this method you can connect with cluster three even when you are actually responding to cluster one.<br />Note that you can also assign actual <b>$request</b> to <b>SkynetPeer</b> instead of creating new one:<br /><br /><pre class="prettyprint linenums">$skynetPeer-&gt;assignRequest($this-&gt;request);</pre><br />Code above will assign actual <b>$request</b> (received from cluster 1) and resend this request to cluster 3.<a name="5_Event_Listeners"></a><h1>5. Event Listeners</h1>Skynet's architecture is based on objects called Event Listeners. They are most important part of every cluster business logic. An idea is that every functionality of cluster is served by appropriate Event Listener. Those listeners are fired when Skynet launchs event like response to request, or request generation/send. Depends on event, listeners functions are called. With Skynet you have some default Event Listeners but the idea is that you will create new ones, depend on your needs.<br /><br />Example:<br />When Skynet preparing response to request, event <i>onResponse()</i> is called:<br /><br /><pre class="prettyprint linenums">public function onResponse($context)<br />{<br />  if($context == &quot;afterReceive&quot;)<br />  {<br />    /* some code here */<br />  } <br />}<br /></pre><br />Skynet executes then all of the code placed in this method called <i>onResponse()</i>.<br />As argument to this method Skynet is sending <i>$context</i>. This argument pass two possible states:<br /><br />- afterReceive - when response/or request is received<br />- beforeSend - when response/or request is preparing<br /><br />With example - when Skynet preparing request, an <i>onRequest()</i> event will be called and <i>$context</i> will be set to 'beforeSend'. <br />From other side - when cluster is creating response, then <i>onResponse()</i> with the same context will be called. By mixing these two things (event name and event context) you can build your logic easy.<br /><br />At default, with Skynet you get some Event Listeners, like Emailer, Cloner, Registry, Echo and more. Every of them doing different things. All of listeners must be registered in <i>EventListenersFactory</i>. <br />When they are registered, then all of them will be called one by one when event occured.<br /><br />In every Event Listener you have access to specialy prepared API methods and objects like <i>$response</i>, <i>$request</i> and more.<br /><br /><b>EventLoggers</b> are special types of Event Listeners. They are called at the end of code execution, when all normal Event Listeners was finished their jobs. <br />They are used for logging data like storing data and results from all Event Listeners launches before.<br /><a name="5_1_Event:_onConnect"></a><h1>5.1. Event: onConnect</h1>Event is calling just after connection to another cluster was opened. It passes <i>connector object</i> whitch is instance of <i>SkynetConnectionInterface</i> as an argument. With this event you can get raw encrypted data (response) from connection.<br /><br /><pre class="prettyprint linenums">public function onConnect($conn = null)  <br />{   <br />  /* code executed after connection to cluster */  <br />}<br /></pre><br />To get raw data from connection use:<br /><pre class="prettyprint linenums">public function onConnect($conn = null)  <br />{   <br />  $rawData = $conn-&gt;getData(); <br />}<br /></pre><br />To get address of connection:<br /><pre class="prettyprint linenums">public function onConnect($conn = null)  <br />{   <br />  $address = $conn-&gt;getUrl(); <br />}<br /></pre><br />More available API methods you will find in API Documentation.<a name="5_2_Event:_onRequest"></a><h1>5.2. Event: onRequest</h1>This event is calling two times - when request data is preparing for send and after receiver cluster receives request from sender cluster. <br />Depends on these two situations an argument with situation context is passed.<br /><br />In first situation, when request is preparing to be send, sender will call code below:<br /><br />Request sender cluster:<br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />   /* code executes in sender when request is preparing to be send */<br />  } <br />}<br /></pre><br />Everything you will assign to request object above will be included in sended request.<br /><br />In second situation, when request is received by cluster code below is executed:<br /><br />Request receiver cluster:<br /><pre class="prettyprint linenums">public function onRequest($context)<br />{<br />  if($context == &quot;afterReceive&quot;)<br />  {<br />   /* code executes in responder when responder gets request from sender */<br />  } <br />}<br /></pre><br />In code above you have access to whole received request via:<br /><br /><pre class="prettyprint linenums">$this-&gt;request</pre><a name="5_3_Event:_onResponse"></a><h1>5.3. Event: onResponse</h1>Similary to <i>onRequest</i> event, this event is calling also two times - when response data is preparing and after sender cluster receives response to request. <br />Depends on these two situations an argument with context is passed.<br /><br />In first situation, when response is preparing to be send, request receiver will call code below:<br /><pre class="prettyprint linenums">public function onResponse($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />   /* code executes in responder when response is preparing to be send */<br />  } <br />}<br /></pre><br />Everything you assign to response object above will be included in sended response.<br /><br />In second situation, when response is received by sender cluster code below is executed:<br /><pre class="prettyprint linenums">public function onResponse($context)<br />{<br />  if($context == &quot;afterReceive&quot;)<br />  {<br />   /* code executes in sender when sender receives response */<br />  } <br />}<br /></pre><br />In code above you are have access to whole received response via:<br /><br /><pre class="prettyprint linenums">$this-&gt;response</pre><a name="5_4_Event:_onEcho"></a><h1>5.4. Event: onEcho</h1>Event is calling two times - when response data is preparing for send and after sender cluster receives response. <br />Depends on these two situations an argument with context is passed.<br /><br />In first situation, when response is preparing to be send, receiver will call code below:<br /><pre class="prettyprint linenums">public function onEcho($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />   /* code executes in responder when response is preparing to be send */<br />  } <br />}<br /></pre><br />Everything you assign to response object above will NOT be send.<br />Response in echo mode is not returned. You can send data from here via only from <b>SkynetPeer</b>.<br /><br />In second situation, when response is received by sender code below is executed:<br /><pre class="prettyprint linenums">public function onEcho($context)<br />{<br />  if($context == &quot;afterReceive&quot;)<br />  {<br />   /* code executes in sender when sender receives response */<br />  } <br />}<br /></pre><br />In code above response will be empty.<a name="5_5_Event:_onBroadcast"></a><h1>5.5. Event: onBroadcast</h1>Event is calling two times - when response data is preparing for send and after sender cluster receives response. <br />Depends on these two situations an argument with context is passed.<br /><br />In first situation, when response is preparing to be send, receiver will call code below:<br /><pre class="prettyprint linenums">public function onBroadcast($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />   /* code executes in responder when response is preparing to be send */<br />  } <br />}<br /></pre><br />Everything you assign to response object above will be included in sended response.<br />In extended broadcast mode also request will be included to response here.<br /><br />In second situation, when response is received by sender code below is executed:<br /><pre class="prettyprint linenums">public function onBroadcast($context)<br />{<br />  if($context == &quot;afterReceive&quot;)<br />  {<br />   /* code executes in sender when sender receives response */<br />  } <br />}<br /></pre><br />In code above you have access to whole received response via:<br /><pre class="prettyprint linenums">$this-&gt;response</pre><a name="5_6_Event:_onConsole"></a><h1>5.6. Event: onConsole</h1>This event is called when Skynet starts (before any connections) when webconsole input commands are passed. You can place here code whitch must be executed when user type defined command or parameter.<br />In event you have access to console object so you can get all parameters and commands.<br /><br />Access to console is offered by object:<br /><br /><pre class="prettyprint linenums">$this-&gt;console</pre><br />Take a look at example:<br /><br /><pre class="prettyprint linenums">public function onConsole()<br />{<br />  if($this-&gt;console-&gt;isConsoleCommand('foo'))<br />  {<br />     /* do something */<br />  }<br />}<br /></pre><br />Code above checks for command <i>foo</i> exists in input.<br /><br />Method <i>isConsoleCommand('COMMAND_NAME')</i>:<br /><br /><pre class="prettyprint linenums">$this-&gt;console-&gt;isConsoleCommand('foo')</pre><br />returns TRUE if there is command <i>@foo</i> typed in console.<br />Note that argument passed here is without @ prefix.<br />At next, you can depends your actions in EventListener from command existing. <br /><br />To get command data (like its params) you must use<br /><br /><pre class="prettyprint linenums">$this-&gt;console-&gt;getConsoleCommand('COMMAND_NAME');</pre><br />This method returns <i>SkynetCommand</i> object.<br /><br />Every <i>SkynetCommand</i> has two most commonly using methods:<br /><br /><pre class="prettyprint linenums">$command-&gt;getCode()</pre><br />whitch returns command string name (without @ prefix)<br /><br /><pre class="prettyprint linenums">$command-&gt;getParams()</pre><br />whitch returns array with params passed to command.<br /><br /><h2> Example: </h2><br /><br /><pre class="prettyprint linenums">public function onConsole()<br />{<br />  if($this-&gt;console-&gt;isConsoleCommand('foo'))<br />  {<br />    $command = $this-&gt;console-&gt;getConsoleCommand('foo');     <br />    $name = $command-&gt;getCode(); // foo<br />    $params = $command-&gt;getParams(); // params passed to @foo     <br />  }<br />}<br /></pre><br />This was about getting commands data, if you want to get parameters passed into console (like <i>foo:bar</i>) you must get parameters list via:<br /><br /><pre class="prettyprint linenums">public function onConsole()<br />{ <br />  $params = $this-&gt;console-&gt;getConsoleRequests();   <br />  <br />  foreach($params as $paramName =&gt; $paramValue)<br />  {<br />    // some code here<br />  }<br />}<br /></pre><br /><h2> Example: </h2><br /><br />If parameter <i>foo</i> with value <i>bar</i> was passed into webconsole by typing:<br /><br /><pre class="prettyprint linenums">foo:bar</pre><br />then you will see this parameter in:<br /><br /><pre class="prettyprint linenums">public function onConsole()<br />{ <br />  $params = $this-&gt;console-&gt;getConsoleRequests();   <br />  <br />  foreach($params as $paramName =&gt; $paramValue)<br />  {<br />    // $paramName &lt;&lt;&lt; foo<br />    // $paramValue &lt;&lt;&lt; bar<br />  }<br />}<br /></pre><br /><h2> Return value </h2><br />Method <i>onConsole()</i> can returns string.<br />If any string is returned it will be display in Console output window in Skynet Control Panel.<br /><br /><h2> Example: </h2><br /><br /><pre class="prettyprint linenums">public function onConsole()<br />{<br />  if($this-&gt;console-&gt;isConsoleCommand('foo'))<br />  {<br />    return 'Command foo is passed';<br />  }<br />}<br /></pre><a name="5_7_Event:_onCli"></a><h1>5.7. Event: onCli</h1>This event is calling only when Skynet starts from CLI mode and when input commands are passed. You can place here code whitch must be executed when user type defined command or parameter.<br />In event you have access to CLI object so you can get all parameters and commands.<br /><br />Access to CLI commands is offered by object:<br /><br /><pre class="prettyprint linenums">$this-&gt;cli</pre><br />Take a look at example:<br /><br /><pre class="prettyprint linenums">public function onCli()<br />{<br />  if($this-&gt;cli-&gt;isCommand('foo'))<br />  {<br />     /* do something */<br />  }<br />}<br /></pre><br />Code above checks for command <i>foo</i> exists in CLI input.<br /><br />Method <i>isCommand('COMMAND_NAME')</i>:<br /><br /><pre class="prettyprint linenums">$this-&gt;cli-&gt;isCommand('foo')</pre><br />returns TRUE if there is command <i>@foo</i> typed in CLI console.<br />Note that argument passed here is without &quot;-&quot; prefix.<br /><br />Access to specified command parameters is offered by method:<br /><br /><pre class="prettyprint linenums">$this-&gt;cli-&gt;getParams('foo')</pre><br />It returns array with passed arguments.<br />If a command gets only one argument you can access it by:<br /><br /><pre class="prettyprint linenums">$this-&gt;cli-&gt;getParam('foo')</pre><br /><h2> Example </h2><br />If you want check for command <i>-foo</i> passed by CLI mode and it params, e.g.:<br /><br /><pre class="prettyprint linenums">php skynet.php -foo param1 param2</pre><br />You will need to do this like this:<br /><br /><pre class="prettyprint linenums">public function onCli()<br />{<br />  if($this-&gt;cli-&gt;isCommand('foo'))<br />  {<br />     $params = $this-&gt;cli-&gt;getParams('foo');<br />     foreach($params as $param)<br />     {<br />       /* some code here */     <br />     }<br />  }<br />}<br /></pre><br />If method <i>onCli()</i> returns any string then this string will be displayed in CLI mode.<br /><br />Example:<br /><br /><pre class="prettyprint linenums">public function onCli()<br />{<br />  if($this-&gt;cli-&gt;isCommand('foo'))<br />  {<br />     /* do something */<br />     return 'Something was done.';<br />  }<br />}<br /></pre><a name="5_8_registerCommands"></a><h1>5.8. registerCommands</h1>This is a special method whitch allows you to register your own commands from Event Listener. You can create commands for webconsole and for CLI mode.<br />This method is calling at Skynet start and all of available in webconsole select list commands and commands whitch are displayed in CLI when you viewing help are defined here.<br /><br />In this method you must define two arrays:<br /><br /><pre class="prettyprint linenums">$cli = [];</pre><br /><pre class="prettyprint linenums">$console = [];</pre>  <br /><br />And you must return this arrays as below:<br /><br /><pre class="prettyprint linenums">return array('cli' =&gt; $cli, 'console' =&gt; $console);</pre><br />In <i>$cli</i> array you can define command for CLI mode, in $console array you can define commands for HTML webconsole.<br />You can create multiple commands, let's see an example:<br /><br /><pre class="prettyprint linenums">$cli[] = ['-debug', '', 'Displays connections full debug'];<br />$cli[] = ['-dbg', '', 'Displays connections full debug (alias)'];<br />$cli[] = ['-cfg', '', 'Displays configuration'];<br /></pre><br />Syntax is here:<br /><br /><pre class="prettyprint linenums">$cli[] = ['-COMMAND_NAME', 'POSSIBLE_PARAMS', 'DESCRIPTION'];</pre><br />where <i>POSSIBLE_PARAMS</i> can be string for single param or array for multiple params.<br />If <i>POSSIBLE_PARAMS</i> are empty then params will not be shown in CLI.<br /><br />When creating command for webconsole use syntax:<br /><br /><pre class="prettyprint linenums">$console[] = ['@COMMAND_NAME', 'POSSIBLE_PARAMS', 'DESCRIPTION'];</pre><br />Definition is similary to <i>$cli</i> expects prefix.<br /><br /><h2> Example: </h2><br /><pre class="prettyprint linenums">public function registerCommands()<br />{    <br />  $cli = [];<br />  $console = [];    <br />  <br />  $cli[] = ['-foo', '', 'bar'];<br />  $cli[] = ['-foo2', 'param1', 'bar2'];<br />  $cli[] = ['-foo3', array('param1', 'param2'), 'bar3'];    <br />  <br />  $console[] = ['@foo', '', 'bar'];<br />  $console[] = ['@foo2', 'param1', 'bar2'];<br />  $console[] = ['@foo3', array('param1', 'param2'), 'bar3'];    <br />  <br />  return array('cli' =&gt; $cli, 'console' =&gt; $console);    <br />}<br /></pre><a name="6_How_to_create_own_Event_Listener?"></a><h1>6. How to create own Event Listener?</h1>Custom Event Listeners should be a heart of your Skynet clusters. That's the idea what Skynet was created for - to offers easy in use architecture and API for creating event based business cluster logic. <br />Let's take a look how to make own Event Listener.<br /><br />By default - an empty template for your listeners is placed here:<br /><br /><pre class="prettyprint linenums">/src/SkynetUser/</pre><br />It's called:<br /><br /><pre class="prettyprint linenums">SkynetEventListenerMyListener.php</pre><br />When you open this file you will see empty methods for each event calling by Skynet.<br />This empty event listener is registered in Skynet by default, so if you place here some code it will be executed when Skynet starts.<br />To registering event listeners Skynet serves a factory class:<br /><br /><pre class="prettyprint linenums">/src/Skynet/EventListener/SkynetEventListenersFactory.php</pre><br />In this factory you will find all listeners assigned to Skynet:<br /><br /><pre class="prettyprint linenums">private function registerEventListeners()<br />{<br />  $this-&gt;register('clusters', new SkynetEventListenerClusters());<br />  $this-&gt;register('cloner', new SkynetEventListenerCloner());<br />  $this-&gt;register('console', new SkynetEventListenerConsole());    <br />  $this-&gt;register('options', new SkynetEventListenerOptions());<br />  $this-&gt;register('registry', new SkynetEventListenerRegistry());<br />  $this-&gt;register('my', new \SkynetUser\SkynetEventListenerMyListener());    <br />  $this-&gt;register('echo', new SkynetEventListenerEcho());<br />  $this-&gt;register('sleeper', new SkynetEventListenerSleeper());<br />  $this-&gt;register('updater', new SkynetEventListenerUpdater());<br />}<br /></pre><br />As you see - your empty listener template is already registered as &quot;my&quot;.<br />If you will create another listeners you would need to register them here if you want to include them in Skynet.<br />Notice that user defined listeners should be exists in namespace:<br /><br /><pre class="prettyprint linenums">\SkynetUser</pre><br />and should be placed into directory:<br /><br /><pre class="prettyprint linenums">/src/SkynetUser/</pre><br />This is for update and compile purposes.<br />When you will updating Skynet's core (e.g. by newest version) your custom classed will be still here in custom folder and after compiling new Skynet's core + your listeners will be included into new version of package.<br /><br />OK. Let's write some code.<br />All events whitch you can use are described in Event Listeners sections.<br />Let's check how to use them and what API methods you can use in your custom listener.<br /><br /><h2> Request and response access </h2><br />In every event listener you have fully access to request and response objects:<br /><br /><pre class="prettyprint linenums">$this-&gt;request</pre><br />and <br /><br /><pre class="prettyprint linenums">$this-&gt;response</pre><br />Setting and getting data from this data are served by </i>set()</i> and <i>get()</i> methods.<br />Take a look at example:<br /><br /><pre class="prettyprint linenums">public function onResponse($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    if($this-&gt;request-&gt;get('foo') == 'bar')<br />    {<br />      $this-&gt;response-&gt;set('bar', 'foo');<br />    }  <br />  } <br />}<br /></pre><br />That is the first method.<br />To get fields from both of this objects you can also use arrays:<br /><br /><pre class="prettyprint linenums">$this-&gt;requestsData[]</pre><br />and <br /><br /><pre class="prettyprint linenums">$this-&gt;responseData[]</pre><br />Example:<br /><br /><pre class="prettyprint linenums">public function onResponse($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    if(isset($this-&gt;requestsData['foo']) &amp;&amp; $this-&gt;requestsData['foo'] == 'bar')<br />    {<br />      if(!isset($this-&gt;responseData['bar']))<br />      {<br />        $this-&gt;response-&gt;set('bar', 'foo');<br />      }<br />    }  <br />  } <br />}<br /></pre><br />Notice that arrays with fields are read-only and you can only getting data with this method.<br />If you will change any data in <i>$responseData[]</i>, your operation will not be included in response - to do this you must use <i>set()</i> method.<br /><br /><h2> Inheriting </h2><br /><br />Every Event Listener must:<br /><br />- extends <i>\Skynet\EventListener\SkynetEventListenerAbstract</i> class<br />- implements <i>\Skynet\EventListener\SkynetEventListenerInterface</i> interface<br /><br /><i>SkynetEventListenerAbstract</i> base class offers to your listener some of useful API method to use.<br />Most important of them are request and response objects, but there is more:<br /><br /><pre class="prettyprint linenums">public function onResponse($context)<br />{<br />  if($context == &quot;beforeSend&quot;)<br />  {<br />    $this-&gt;reg_set('foo', 'bar'); /* will set Registry field 'foo' to 'bar' */<br />    $foo = $this-&gt;reg_get('foo'); /* will get field 'foo' from Registry */<br />    <br />    $this-&gt;opt_set('foo', 'bar'); /* will set option 'foo' to 'bar' */<br />    $foo = $this-&gt;opt_get('foo'); /* will get option 'foo' from internal options */<br />    <br />    $this-&gt;auth /* Access to auth object */<br />    $this-&gt;db /* Access to DB PDO instance */<br />    $this-&gt;verifier /* Access to verifier */<br />    <br />    $this-&gt;myAddress /* address of my cluster */<br />  } <br />}<br /></pre><br />Of course, you can use more of Skynet objects, like Logger, Emailer or Console.<br />Full reference you will find in API Documentation.<br /><br />After creating your listener you should launch Skynet compiler to compile it into cluster file. <br /><br />When you creating much more complicated files structure of your own classes (extending, implementing, etc.) remember that abstract classes files shout be named as:<br /><br /><pre class="prettyprint linenums">ClassNameAbstract</pre><br />Interfaces should be named as:<br /><br /><pre class="prettyprint linenums">ClassNameInterface</pre><br />Traits should be named:<br /><br /><pre class="prettyprint linenums">ClassNameTrait</pre><br />This is for compilation reason - files with abstract classes, interfaces and trait are compiling at the beginning of compiled file (when you inherits from non-existing yet class PHP generates error), so remember of this.<br />You can create files structure as you want - it will all be compiled into standalone file. <br /><br /><b>Notice:</b> when compiling - all <i>use</i> (expect traits use in class definition) and <i>namespace</i> directives will be erased.<a name="7_Console"></a><h1>7. Console</h1>Skynet offers by default some of useful webconsole commands.<br />With webconsole you can sending requests to another clusters from hand.<a name="7_1_Syntax"></a><h1>7.1. Syntax</h1>- You can send multiple fields at once, but all commands and parameters must be separated by &quot;;&quot; and every parameter/command must be in new line.<br /><br /><pre class="prettyprint linenums">@wakeup CLUSTER_ADDRESS;<br />@reg_set foo:bar;<br />foo2:bar2;<br />foo3:bar3;<br /></pre><br />- Setting parameters must follow syntax:<br /><br /><pre class="prettyprint linenums">key:value</pre><br />or<br /><br /><pre class="prettyprint linenums">key1:value1, key2:value2, key3:value3</pre><br />- Passing arguments to commands must be done after space:<br /><br /><pre class="prettyprint linenums">@command argument</pre><br />or <br /><br /><pre class="prettyprint linenums">@command argument1, argument2, argument3</pre><br /><br />- Passing <i>key:value</i> assignments in commands must follow syntax:<br /><br /><pre class="prettyprint linenums">@command key:value</pre><br />or<br /><br /><pre class="prettyprint linenums">@command key1:value1, key2:value2, key3:value3</pre><br />- You can mix parameters and commands:<br /><br /><pre class="prettyprint linenums">@reg_set foo:bar;<br />foo:bar;<br />@to CLUSTER_ADDRESS<br /></pre><a name="7_2_Commands_list"></a><h1>7.2. Commands list</h1><h2> @add </h2><br />Adds specified cluster(s) address(es) to database<br /><pre class="prettyprint linenums">@add CLUSTER_ADDRESS</pre><br />or<br /><br /><pre class="prettyprint linenums">@add CLUSTER_ADDRESS1, CLUSTER_ADDRESS2, CLUSTER_ADDRESS3...</pre><br /><h2> @connect </h2><br />Connects with specified cluster(s) address(es)<br /><pre class="prettyprint linenums">@connect CLUSTER_ADDRESS</pre><br />or<br /><br /><pre class="prettyprint linenums">@connect CLUSTER_ADDRESS1, CLUSTER_ADDRESS2, CLUSTER_ADDRESS3...</pre><br /><h2> @to </h2><br />Specifies single receiver for request.<br />Use this to mix with other commands.<br /><pre class="prettyprint linenums">@to CLUSTER_ADDRESS</pre><br /><h2> @update </h2><br />Sends update command to all clusters.<br />Argument specifies address to source file from whitch cluster's updaters will get new code<br /><pre class="prettyprint linenums">@update source:SOURCE_FILE_ADDRESS</pre><br /><h2> @echo </h2><br />Sends echo request to all clusters. <br /><pre class="prettyprint linenums">@echo</pre><br /><h2> @sleep </h2><br />Sleeps cluster (s). Without any arguments will sleeps all clusters.<br /><pre class="prettyprint linenums">@sleep</pre><br />or<br /><br /><pre class="prettyprint linenums">@sleep CLUSTER_ADDRESS</pre><br />or<br /><br /><pre class="prettyprint linenums">@sleep CLUSTER_ADDRESS1, CLUSTER_ADDRESS2, CLUSTER_ADDRESS3...</pre><br />or<br /><br />Sleep my cluster:<br /><pre class="prettyprint linenums">@sleep me</pre><br /><i>me</i> is an alias to THIS cluster.<br /><br /><h2> @wakeup </h2><br />Wake-ups cluster (s). Without any arguments will wake-up all clusters.<br /><pre class="prettyprint linenums">@wakeup</pre><br />or<br /><br /><pre class="prettyprint linenums">@wakeup CLUSTER_ADDRESS</pre><br />or<br /><br /><pre class="prettyprint linenums">@wakeup CLUSTER_ADDRESS1, CLUSTER_ADDRESS2, CLUSTER_ADDRESS3...</pre><br />or<br /><br />Wake up my cluster:<br /><pre class="prettyprint linenums">@wakeup me</pre><br /><h2> @broadcast </h2><br />Enabling extended broadcast (request will be resending by clusters to each others)<br /><pre class="prettyprint linenums">@broadcast</pre><br /><h2> @opt_set </h2><br />Sets cluster option on remote<br /><pre class="prettyprint linenums">@opt_set key1:value1, key2:value2, key3:value3...</pre><br /><h2> @opt_get </h2><br />Gets cluster option from remote<br /><pre class="prettyprint linenums">@opt_get key1, key2, key3...</pre><br /><h2> @reg_set </h2><br />Sets registry value on remote<br /><pre class="prettyprint linenums">@reg_set key1:value1, key2:value2, key3:value3...</pre><br /><h2> @reg_get </h2><br />Gets registry value from remote<br /><pre class="prettyprint linenums">@reg_get  key1, key2, key3...</pre><br /><h2> @clone </h2><br />Executes self-cloning command<br /><pre class="prettyprint linenums">@clone </pre><br />or<br /><br /><pre class="prettyprint linenums">@clone  CLUSTER_ADDRESS</pre><br />or<br /><br /><pre class="prettyprint linenums">@clone  CLUSTER_ADDRESS1, CLUSTER_ADDRESS2, CLUSTER_ADDRESS3...</pre><br />or<br /><br />Clone my cluster:<br /><pre class="prettyprint linenums">@clone  me</pre><a name="8_Compiling_Skynet_sources_into_standalone"></a><h1>8. Compiling Skynet sources into standalone</h1>The main idea of Skynet is to use single standalone easy to move files as clusters. Sources placed in <i>/src</i> folder should be compiled via built-in compile script and only compiled clusters should be used. <br />Of course, you can use non-compiled versions but that is not idea of this framework.<br /><br />To compile all sources (including your custom listeners and classes) into single standalone cluster just launch:<br /><br /><pre class="prettyprint linenums">/compile.php</pre><br />from your browser or CLI Mode.<br />This will compile all sources from <i>/src</i> into <i>/_compiled</i> folder.<br />The name of the compiled file will be:<br /><br /><pre class="prettyprint linenums">skynet_{COMPILATION_TIME}.php</pre><br />Compiled version includes all required classes and is ready to use.<br />You can also specify compiler output directory in:<br /><br /><pre class="prettyprint linenums">/src/Skynet/Tools/SkynetCompiler.php</pre><br />You can also compile sources from any cluster when you launching Skynet in CLI mode:<br /><br /><pre class="prettyprint linenums">php skynet.php -compile</pre><a name="9_Skynet_Control_Panel"></a><h1>9. Skynet Control Panel</h1>Skynet Control Panel is main interface for controlling and debugging Skynet connections.<br />You can access Panel when you launch Skynet from internet browser. Panel is splitted into 2 views: connections and database.<br />Every Skynet cluster have its own Panel, you can run Panel e.g. by placing Skynet downloaded from GitHub on localhost and run <i>dev.php</i> or <i>skynet.php</i> in browser.<a name="9_1_View:_Connections"></a><h1>9.1. View: Connections</h1>Connections View have 3 sections: status data (left column), connections data (right column) and webconsole (bottom).<br /><br /><img src="img/cp_connections.jpg"><br /><br /><h2> Status data </h2><br />In left column you will see most inportant informations about Skynet status.<br />There are 5 sections:<br /><br />- Summary - informations about KEY ID, clusters in database, succesed connections and more<br />- Errors - list with errors <br />- States - list with states of Skynet components<br />- Config - actual configuration<br /><br />When console is in use there will be displayed once more section: Console Input.<br /><br /><h2> Connections data </h2><br />On right side you have window with all parameters whitch are sending and receiving via connections with other clusters.<br />If there is no connection actualy this window is empty.<br />Every connection data has 9 sections:<br /><br />- Cluster Info - information about connected cluster<br />- Request Fields {sended} (plain) - raw requested to cluster fields <br />- Response Fields {received} (decrypted) - encrypted fields from cluster response<br />- Request Fields {sended} (encrypted) - encrypted requested to cluster fields <br />- Response Fields {received} (raw) - raw fields from cluster response<br />- SENDED PARAMS - raw sended data packet<br />- SENDED HEADER PARAMS (BROADCAST) - raw sended header packet (headers are ony sent in broadcast mode)<br />- RECEIVED RAW DATA - raw received response packet<br />- RECEIVED RAW HEADER (BROADCAST) - raw received response packet (headers are ony sent in broadcast mode)<br /><br />All @ prefixed parameters are internal Skynet parameters.<br /><br /><h2> Webconsole </h2><br />On the bottom you have webconsole for inputing commands and parameters.<br />Above the console is select list with shortcuts to commands with short descriptions.<br /><br /><h2> VIEW SWITCH AND LOGOUT </h2><br />On the top right corner you have switch to change view (connections/database) and logout button.<a name="9_2_View:_Database"></a><h1>9.2. View: Database</h1>Database view allow you to access to cluster database.<br />On the to you will se select list where you can select actual viewing table and sort/pagination options.<br /><br />Records list can be deleted via <i>Delete</i> button.<br />You can also export any record to text file by clicking on <i>Generate TXT</i> button.<br /><br /><img src="img/cp_database.jpg"><br /><br /><h2> Database tables: </h2><br /><br />- Clusters - stores clusters data<br />- Registry - stores registry options`<br />- Options - stores configuration<br />- Chain - stores actual chain value<br />- Logs: Responses - stored responses<br />- Logs: Requests - stored requests<br />- Logs: Echo - stored echo commands<br />- Logs: Broadcasts - stored broadcast commands<br />- Logs: Errors - stored errors<br />- Logs: Access Errors - stored security errors (unathorized access to Panel and incorrect KEY ID in connections)<br />- Logs: Self-updates - stored update procedures<br /><br />You can view and delete all of the records but you should not delete data from Chain and Clusters tables.<a name="10_Extending_&_customizing"></a><h1>10. Extending & customizing</h1>Skynet architecture is easy to extend and to customize. Even core features can be replace by custom ones. In this section you will see how to customize or extends Skynet by own core elements.<a name="10_1_Custom_Data_Encryption"></a><h1>10.1. Custom Data Encryption</h1>By default, Skynet offers one class for simple encryption data:<br /><br />- via base64<br /><br />You can create and add your own encryption method by implementing:<br /><br /><pre class="prettyprint linenums">/src/Skynet/Encryptor/SkynetEncryptorInterface.php</pre><br />and adding new encryptor to:<br /><br /><pre class="prettyprint linenums">/src/Skynet/Encryptor/SkynetEncryptorsFactory.php</pre><br />After that you can set encryption method in <i>/src/SkynetUser/SkynetConfig.php</i> file by changing option:<br /><br /><pre class="prettyprint linenums">'core_encryptor' =&gt; 'YOUR_ENCRYPTOR',</pre><br />Where <i>YOUR_ENCRYPTOR</i> is the name of encryptor defined in register method in factory.<a name="10_2_Custom_Connection_Classes"></a><h1>10.2. Custom Connection Classes</h1>By default, Skynet offers two connection methods:<br /><br />- via <i>cURL</i> library<br />- via <i>file_get_contents()</i> function<br /><br />You can create and add your own connection class by implementing:<br /><br /><pre class="prettyprint linenums">/src/Skynet/SkynetConnectionInterface.php</pre><br />and registering new class in factory:<br /><br /><pre class="prettyprint linenums">/src/Skynet/SkynetConnectionsFactory.php</pre><br />After that you can set connection method in <i>/src/SkynetUser/SkynetConfig.php</i> file by changing option:<br /><br /><pre class="prettyprint linenums">'core_connection_type' =&gt; 'YOUR_CONNECTOR',</pre><br />Where <i>YOUR_CONNECTOR</i> is the name of connector defined in register method in factory.<a name="10_3_Custom_Commands_Shortcuts"></a><h1>10.3. Custom Commands Shortcuts</h1>Skynet offers quick shortcut commands list above webconsole.<br />This list is hardcoded but you can add here your own commands in:<br /><br /><pre class="prettyprint linenums">/src/Skynet/Console/SkynetConsole.php</pre><br />Custom command can be added to list by:<br /><br /><pre class="prettyprint linenums">$this-&gt;addCommand()</pre><br />method in class constructor.<br /><br />Custom commands can be defined in Event Listeners also via<br /><br /><pre class="prettyprint linenums">registerCommands()</pre><br />method.<a name="10_4_Custom_Themes"></a><h1>10.4. Custom Themes</h1>You can change CSS theme of <i>Skynet Control Panel</i> by adding different theme in file:<br /><br /><pre class="prettyprint linenums">/src/Skynet/Renderer/Html/SkynetRendererHtmlThemes.php</pre><br />After that you will need to change theme name in main config file.<a name="11_Configuration"></a><h1>11. Configuration</h1>Skynet configuration is placed in /src/SkynetUser/SkynetConfig.php file.<br />When compiling this file is including at the beginning of compiled standalone version.<br /><br />Configuration options:<br /><br /><br /><b>KEY_ID</b> - your Skynet Key ID<br /><br /><b>PASSWORD</b> - admin password for Skynet Control Panel<br /><br /><h2> Core configuration - base options: </h2><br /><br /><br /><b>core_secure</b> -&gt; bool:[true|false]<br />If TRUE, Skynet will verify KEY ID in every response, if FALSE - you will able to connect without key (USE THIS ONLY FOR TESTS!!!) <br /><br /><br /><b>core_raw</b> -&gt; bool:[true|false]<br />If TRUE all sending and receiving data will be encrypted, if FALSE - all data will be send in plain text <br /><br /><br /><b>core_updater</b> -&gt; bool:[true|false]<br />If TRUE Skynet will enable self-remote-update engine, if FALSE - self-remote-engine will be disabled <br /><br /><br /><b>core_cloner</b> -&gt; bool:[true|false]<br />Enables or disabled clone engine<br /><br /><br /><b>core_updater_url</b> -&gt; string:[url]<br />Address to base file with PHP code sending to clusters on self-update operation <br /><br /><br /><b>core_encryptor</b> -&gt; string:[base64|...]<br />Name of registered class used for encrypting data <br /><br /><br /><b>core_renderer_theme</b> -&gt; string:[dark|light|raw|...]<br />Theme CSS configuration for HTML Renderer <br /><br /><br /><b>core_date_format</b> -&gt; string<br />Date format for date() function <br /><br /><br /><h2> Core configuration - connections with clusters: </h2><br /><br /><br /><b>core_connection_mode</b> -&gt; string:[host|ip]<br />Specified connection addresses by host or IP <br /><br /><b>core_connection_type</b> -&gt; string:[curl|file_get_contents|...]<br />Name of registered class used for connection with clusters <br /><br /><b>core_connection_protocol</b> -&gt; string:[http|https]<br />Connections protocol <br /><br /><b>core_connection_ssl_verify</b> -&gt; bool:[true|false]<br />Only for cURL, set to FALSE to disable verification of SSL certificates <br /><br /><b>core_connection_curl_cli_echo</b> -&gt; bool:[true|false]<br />If true CURL will display connection output in CLI mode (VERBOSE OPTION) <br /><br /><br /><h2> Emailer configuration: </h2><br /><br /><b>core_email_send</b> -&gt; bool:[true|false]<br />TRUE for enable auto-emailer engine for responses, FALSE to disable <br /><br /><b>core_email_send</b> -&gt; bool:[true|false]<br />TRUE for enable auto-emailer engine for requests, FALSE to disable <br /><br /><b>core_email_address</b> -&gt; [email]<br />Specify email address for receiving emails from Skynet <br /><br /><br /><h2> Response: </h2><br /><br /><b>response_include_request</b> -&gt; bool:[true|false]<br />If TRUE, response will be attaching requests data with @ prefix, if FALSE requests data will not be included into response <br /><br /><br /><h2> Logs: </h2><br /><br /><b>logs_errors_with_full_trace</b> -&gt; bool:[true|false]<br /><br /><b>logs_dir</b> -&gt; string:[path/]<br />Specify path to dir where Skynet will save logs, or leave empty to save logs in Skynet directory <br /><br /><b>logs_txt_*</b> -&gt; bool:[true|false]<br />Enable or disable txt logs for specified Event <br /><br /><b>logs_txt_include_internal_data</b> -&gt; bool:[true|false]<br />If TRUE, Skynet will include internal params in txt logs <br /><br /><b>logs_db_*</b> -&gt; bool:[true|false<br />Enable or disable database logs for specified Event <br /><br /><b>logs_db_include_internal_data</b> -&gt; bool:[true|false]<br />If TRUE, Skynet will include internal params in database logs <br /><br /><br /><br /><h2> Remote disable: </h2><br /><br /><b>die_all</b> -&gt; bool:[true|false]<br />If TRUE, Skynet will send termination command to all cluster and deactivate them <br /><br /><b>restore_all</b> -&gt; bool:[true|false]<br />If TRUE, Skynet will send reactivation command to all cluster terminat by die_all <br /><br /><br /><h2> Database configuration: </h2><br /><br /><b>db</b> -&gt; bool:[true|false]<br />Enable or disable database support. If disabled some of functions of Skynet will not work  <br /><br /><b>db_type</b> -&gt; string:[dsn]<br />Specify adapter for PDO (sqlite is recommended)  <br /><br /><b>DB connection config</b><br />db_host<br />db_user<br />db_password<br />db_dbname<br />db_encoding<br />db_port<br /><br /><b>db_file</b> -&gt; string:[filename]<br />SQLite database filename, leave empty to let Skynet specify names itself (recommended)  <br /><br /><b>db_file</b> -&gt; string:[path/]<br />SQLite database path, if empty db will be created in Skynet directory  <br /><br /><h2> Debug options </h2><br /><br /><b>console_debug</b> -&gt; bool:[true|false]<br />If TRUE, console command debugger will be displayed when parsing input <br /><br /><b>debug_exceptions</b> -&gt; bool:[true|false]<br />If TRUE, debugger will show more info like line, file and trace on errors <br /><a name="12_CLI_mode"></a><h1>12. CLI mode</h1>Skynet also works in CLI mode with different interface.<br />To launch Skynet in CLI mode just launch:<br /><br />php skynet.php<br /><br />This version of Skynet serves you some commands to use:<br /><br /><h2> -debug </h2><br />Displays connections full debug<br /><br /><br /><h2> -dbg </h2><br />Displays connections full debug (alias)<br /><br /><br /><h2> -cfg </h2><br />Displays configuration<br /><br /><br /><h2> -status </h2><br />Displays status<br /><br /><br /><h2> -out [field] or [field1, field2...] </h2><br />Displays only specified fields returned from response<br /><br /><br /><h2> -connect [address] </h2><br />Connects to single specified address<br /><br /><br /><h2> -c [address] </h2><br />Connects to single specified address (alias)<br /><br /><br /><h2> -broadcast </h2><br />Broadcasts all addresses (starts Skynet)<br /><br /><br /><h2> -b </h2><br />Broadcasts all addresses (starts Skynet) (alias)<br /><br /><br /><h2> -send [&quot;request params&quot;] </h2><br />Sends request from command line, syntax of request params is the same like in webconsole<br /><br /><br /><h2> -db [table name] optional: [page] [sortByColumn] [ASC|DESC] </h2><br />Displays logs records from specified table in database<br /><br /><br /><h2> -db [table name] -del [record ID] </h2><br />Erases record from database table  <br /><br /><br /><h2> -db [table name] -truncate </h2><br />Erases ALL RECORDS from database table   <br /><br /> <br /><h2> -sleep </h2><br />Sleeps this cluster<br /><br /><br /><h2> -wakeup </h2><br />Wakeups this cluster<br /><br /><br /><h2> -help </h2><br />Displays help<br /><br /><br /><h2> -h </h2><br />Displays help (alias)<br /><br /> <br /><h2> -pwdgen [your password] </h2><br />Generates new password hash from plain password<br /><br /><br /><h2> -keygen </h2><br />Generates new SKYNET ID KEY  <br /><br /><h2> -compile </h2><br />Compiles sources from <i>/src</i> into standalone<a name="13_API_Documentation"></a><h1>13. API Documentation</h1>Full API reference is available with PHPDOC:<br /><br /><a href="../ApiDocumentation/index.html">../ApiDocumentation/index.html</a><a name="14_Updating_Skynet"></a><h1>14. Updating Skynet</h1>Skynet is still in development, so if new versions will be available on GitHub you will should update your clusters with newest version.<br />When you will download an update with new sources you will need to recompile your version of clusters.<br /><br />After download new version just replace old <i>/src/Skynet</i> folder with new one and do not replace your code from <i>/src/SkynetUser</i> directory. At next, just recompile your clusters. <br />Your old config and listeners will be included into new version of Skynet's core.<a name="15_Contact_and_donate"></a><h1>15. Contact and donate</h1>Link to GitHub: <a href="http://github.com/szczyglinski/skynet">http://github.com/szczyglinski/skynet</a><br />Link to website: <a href="http://skynetframework.blogspot.com">http://skynetframework.blogspot.com</a><br />Email to author: <a href="szczyglis83@gmail.com">szczyglis83@gmail.com</a><br /><br /><hr>Skynet is Open Source but if you liked Skynet then you can donate project in BTC: 14X6zSCbkU5wojcXZMgT9a4EnJNcieTrcr<br>or via PayPal: <br>Donate Skynet with BTC: <b>14X6zSCbkU5wojcXZMgT9a4EnJNcieTrcr</b><br/>or via PayPal:<br><br><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="WNLXYMQRKU3Q6">
<input type="image" src="https://www.paypalobjects.com/en_US/PL/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>

<br><br>Enjoy!</div> 
    <div class="clr"></div>
  </div> 
  </div>
  </body>
  </html>